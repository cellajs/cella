[
  {
    "operationId": "pagesPublicStream",
    "responses": [
      {
        "status": 200,
        "description": "Catch-up activities or SSE stream started",
        "contentType": "application/json",
        "schema": {
          "type": "object",
          "properties": {
            "activities": {
              "type": "array",
              "required": true,
              "itemType": "object",
              "ref": "#/components/schemas/PublicStreamActivity",
              "items": {
                "type": "object",
                "properties": {
                  "activityId": { "type": "string", "required": true },
                  "action": {
                    "type": "string",
                    "required": true,
                    "enum": ["create", "update", "delete"]
                  },
                  "entityType": {
                    "type": "string",
                    "required": true,
                    "enum": ["attachment", "page"]
                  },
                  "entityId": { "type": "string", "required": true },
                  "changedKeys": {
                    "type": ["array", "null"],
                    "required": true,
                    "itemType": "string"
                  },
                  "createdAt": { "type": "string", "required": true }
                },
                "ref": "#/components/schemas/PublicStreamActivity"
              }
            },
            "cursor": {
              "type": ["string", "null"],
              "required": true,
              "description": "Last activity ID (use as offset for next request)"
            }
          },
          "contentType": "application/json"
        }
      },
      {
        "status": 400,
        "description": "Bad request: problem processing request.",
        "name": "BadRequestError",
        "ref": "#/components/responses/BadRequestError",
        "contentType": "application/json"
      },
      {
        "status": 401,
        "description": "Unauthorized: authentication required.",
        "name": "UnauthorizedError",
        "ref": "#/components/responses/UnauthorizedError",
        "contentType": "application/json"
      },
      {
        "status": 403,
        "description": "Forbidden: insufficient permissions.",
        "name": "ForbiddenError",
        "ref": "#/components/responses/ForbiddenError",
        "contentType": "application/json"
      },
      {
        "status": 404,
        "description": "Not found: resource does not exist.",
        "name": "NotFoundError",
        "ref": "#/components/responses/NotFoundError",
        "contentType": "application/json"
      },
      {
        "status": 429,
        "description": "Rate limit: too many requests.",
        "name": "TooManyRequestsError",
        "ref": "#/components/responses/TooManyRequestsError",
        "contentType": "application/json"
      }
    ],
    "request": {
      "query": {
        "properties": {
          "offset": {
            "type": "string",
            "required": false,
            "description": "Cursor offset: \"-1\" for all history, \"now\" for live-only, or activity ID"
          },
          "live": {
            "type": "string",
            "required": false,
            "description": "Set to \"sse\" for live updates (SSE stream)",
            "enum": ["sse"]
          }
        }
      }
    }
  },
  {
    "operationId": "createPages",
    "responses": [
      {
        "status": 200,
        "description": "Pages already created (idempotent)",
        "contentType": "application/json",
        "schema": {
          "type": "object",
          "properties": {
            "data": {
              "type": "array",
              "required": true,
              "itemType": "object",
              "ref": "#/components/schemas/Page",
              "items": {
                "type": "object",
                "properties": {
                  "createdAt": { "type": "string", "required": true },
                  "id": { "type": "string", "required": true },
                  "entityType": {
                    "type": "string",
                    "required": true,
                    "enum": ["page"]
                  },
                  "name": { "type": "string", "required": true },
                  "description": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "modifiedAt": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "keywords": { "type": "string", "required": true },
                  "createdBy": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "modifiedBy": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "tx": {
                    "type": "object",
                    "required": true,
                    "properties": {
                      "id": { "type": "string", "required": true },
                      "sourceId": { "type": "string", "required": true },
                      "version": { "type": "number", "required": true },
                      "fieldVersions": { "type": "object", "required": true }
                    }
                  },
                  "status": {
                    "type": "string",
                    "required": true,
                    "enum": ["unpublished", "published", "archived"]
                  },
                  "parentId": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "displayOrder": {
                    "type": "number",
                    "required": true,
                    "minimum": -140737488355328,
                    "maximum": 140737488355327
                  }
                },
                "ref": "#/components/schemas/Page"
              }
            },
            "rejectedItemIds": {
              "type": "array",
              "required": true,
              "description": "Identifiers of items that could not be processed",
              "itemType": "string"
            }
          },
          "contentType": "application/json"
        }
      },
      {
        "status": 201,
        "description": "Pages created",
        "contentType": "application/json",
        "schema": {
          "type": "object",
          "properties": {
            "data": {
              "type": "array",
              "required": true,
              "itemType": "object",
              "ref": "#/components/schemas/Page",
              "items": {
                "type": "object",
                "properties": {
                  "createdAt": { "type": "string", "required": true },
                  "id": { "type": "string", "required": true },
                  "entityType": {
                    "type": "string",
                    "required": true,
                    "enum": ["page"]
                  },
                  "name": { "type": "string", "required": true },
                  "description": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "modifiedAt": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "keywords": { "type": "string", "required": true },
                  "createdBy": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "modifiedBy": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "tx": {
                    "type": "object",
                    "required": true,
                    "properties": {
                      "id": { "type": "string", "required": true },
                      "sourceId": { "type": "string", "required": true },
                      "version": { "type": "number", "required": true },
                      "fieldVersions": { "type": "object", "required": true }
                    }
                  },
                  "status": {
                    "type": "string",
                    "required": true,
                    "enum": ["unpublished", "published", "archived"]
                  },
                  "parentId": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "displayOrder": {
                    "type": "number",
                    "required": true,
                    "minimum": -140737488355328,
                    "maximum": 140737488355327
                  }
                },
                "ref": "#/components/schemas/Page"
              }
            },
            "rejectedItemIds": {
              "type": "array",
              "required": true,
              "description": "Identifiers of items that could not be processed",
              "itemType": "string"
            }
          },
          "contentType": "application/json"
        }
      },
      {
        "status": 400,
        "description": "Bad request: problem processing request.",
        "name": "BadRequestError",
        "ref": "#/components/responses/BadRequestError",
        "contentType": "application/json"
      },
      {
        "status": 401,
        "description": "Unauthorized: authentication required.",
        "name": "UnauthorizedError",
        "ref": "#/components/responses/UnauthorizedError",
        "contentType": "application/json"
      },
      {
        "status": 403,
        "description": "Forbidden: insufficient permissions.",
        "name": "ForbiddenError",
        "ref": "#/components/responses/ForbiddenError",
        "contentType": "application/json"
      },
      {
        "status": 404,
        "description": "Not found: resource does not exist.",
        "name": "NotFoundError",
        "ref": "#/components/responses/NotFoundError",
        "contentType": "application/json"
      },
      {
        "status": 429,
        "description": "Rate limit: too many requests.",
        "name": "TooManyRequestsError",
        "ref": "#/components/responses/TooManyRequestsError",
        "contentType": "application/json"
      }
    ],
    "request": {
      "body": {
        "type": "array",
        "itemType": "object",
        "items": {
          "type": "object",
          "required": true,
          "properties": {
            "name": { "type": "string", "required": false },
            "tx": {
              "type": "object",
              "required": true,
              "properties": {
                "id": {
                  "type": "string",
                  "required": true,
                  "description": "Unique mutation ID (nanoid)",
                  "maxLength": 32
                },
                "sourceId": {
                  "type": "string",
                  "required": true,
                  "description": "Tab/instance identifier for echo prevention",
                  "maxLength": 64
                },
                "baseVersion": {
                  "type": "integer",
                  "required": true,
                  "description": "Entity version when read (for conflict detection)",
                  "minimum": 0
                }
              },
              "ref": "#/components/schemas/TxRequest"
            }
          }
        },
        "minItems": 1,
        "maxItems": 50,
        "required": true,
        "contentType": "application/json"
      }
    }
  },
  {
    "operationId": "getPages",
    "responses": [
      {
        "status": 200,
        "description": "Pages",
        "contentType": "application/json",
        "schema": {
          "type": "object",
          "properties": {
            "items": {
              "type": "array",
              "required": true,
              "itemType": "object",
              "ref": "#/components/schemas/Page",
              "items": {
                "type": "object",
                "properties": {
                  "createdAt": { "type": "string", "required": true },
                  "id": { "type": "string", "required": true },
                  "entityType": {
                    "type": "string",
                    "required": true,
                    "enum": ["page"]
                  },
                  "name": { "type": "string", "required": true },
                  "description": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "modifiedAt": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "keywords": { "type": "string", "required": true },
                  "createdBy": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "modifiedBy": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "tx": {
                    "type": "object",
                    "required": true,
                    "properties": {
                      "id": { "type": "string", "required": true },
                      "sourceId": { "type": "string", "required": true },
                      "version": { "type": "number", "required": true },
                      "fieldVersions": { "type": "object", "required": true }
                    }
                  },
                  "status": {
                    "type": "string",
                    "required": true,
                    "enum": ["unpublished", "published", "archived"]
                  },
                  "parentId": {
                    "type": ["string", "null"],
                    "required": true
                  },
                  "displayOrder": {
                    "type": "number",
                    "required": true,
                    "minimum": -140737488355328,
                    "maximum": 140737488355327
                  }
                },
                "ref": "#/components/schemas/Page"
              }
            },
            "total": { "type": "number", "required": true }
          },
          "contentType": "application/json"
        }
      },
      {
        "status": 400,
        "description": "Bad request: problem processing request.",
        "name": "BadRequestError",
        "ref": "#/components/responses/BadRequestError",
        "contentType": "application/json"
      },
      {
        "status": 401,
        "description": "Unauthorized: authentication required.",
        "name": "UnauthorizedError",
        "ref": "#/components/responses/UnauthorizedError",
        "contentType": "application/json"
      },
      {
        "status": 403,
        "description": "Forbidden: insufficient permissions.",
        "name": "ForbiddenError",
        "ref": "#/components/responses/ForbiddenError",
        "contentType": "application/json"
      },
      {
        "status": 404,
        "description": "Not found: resource does not exist.",
        "name": "NotFoundError",
        "ref": "#/components/responses/NotFoundError",
        "contentType": "application/json"
      },
      {
        "status": 429,
        "description": "Rate limit: too many requests.",
        "name": "TooManyRequestsError",
        "ref": "#/components/responses/TooManyRequestsError",
        "contentType": "application/json"
      }
    ],
    "request": {
      "query": {
        "properties": {
          "q": { "type": "string", "required": false },
          "sort": {
            "type": "string",
            "required": false,
            "enum": ["name", "status", "createdAt"]
          },
          "order": {
            "type": "string",
            "required": false,
            "enum": ["asc", "desc"]
          },
          "offset": { "type": "string", "required": false },
          "limit": { "type": "string", "required": false }
        }
      }
    }
  },
  {
    "operationId": "deletePages",
    "responses": [
      { "status": 204, "description": "Page(s) deleted" },
      {
        "status": 400,
        "description": "Bad request: problem processing request.",
        "name": "BadRequestError",
        "ref": "#/components/responses/BadRequestError",
        "contentType": "application/json"
      },
      {
        "status": 401,
        "description": "Unauthorized: authentication required.",
        "name": "UnauthorizedError",
        "ref": "#/components/responses/UnauthorizedError",
        "contentType": "application/json"
      },
      {
        "status": 403,
        "description": "Forbidden: insufficient permissions.",
        "name": "ForbiddenError",
        "ref": "#/components/responses/ForbiddenError",
        "contentType": "application/json"
      },
      {
        "status": 404,
        "description": "Not found: resource does not exist.",
        "name": "NotFoundError",
        "ref": "#/components/responses/NotFoundError",
        "contentType": "application/json"
      },
      {
        "status": 429,
        "description": "Rate limit: too many requests.",
        "name": "TooManyRequestsError",
        "ref": "#/components/responses/TooManyRequestsError",
        "contentType": "application/json"
      }
    ],
    "request": {
      "body": {
        "type": "object",
        "properties": {
          "ids": {
            "type": "array",
            "required": true,
            "minItems": 1,
            "maxItems": 50,
            "itemType": "string"
          }
        },
        "required": true,
        "contentType": "application/json"
      }
    }
  },
  {
    "operationId": "getPage",
    "responses": [
      {
        "status": 200,
        "description": "Page",
        "name": "Page",
        "ref": "#/components/schemas/Page",
        "contentType": "application/json",
        "schema": {
          "type": "object",
          "properties": {
            "createdAt": { "type": "string", "required": true },
            "id": { "type": "string", "required": true },
            "entityType": {
              "type": "string",
              "required": true,
              "enum": ["page"]
            },
            "name": { "type": "string", "required": true },
            "description": {
              "type": ["string", "null"],
              "required": true
            },
            "modifiedAt": {
              "type": ["string", "null"],
              "required": true
            },
            "keywords": { "type": "string", "required": true },
            "createdBy": {
              "type": ["string", "null"],
              "required": true
            },
            "modifiedBy": {
              "type": ["string", "null"],
              "required": true
            },
            "tx": {
              "type": "object",
              "required": true,
              "properties": {
                "id": { "type": "string", "required": true },
                "sourceId": { "type": "string", "required": true },
                "version": { "type": "number", "required": true },
                "fieldVersions": { "type": "object", "required": true }
              }
            },
            "status": {
              "type": "string",
              "required": true,
              "enum": ["unpublished", "published", "archived"]
            },
            "parentId": {
              "type": ["string", "null"],
              "required": true
            },
            "displayOrder": {
              "type": "number",
              "required": true,
              "minimum": -140737488355328,
              "maximum": 140737488355327
            }
          },
          "ref": "#/components/schemas/Page",
          "contentType": "application/json"
        },
        "example": {
          "id": "co96vrmic3wbowmxzbqa1e9f",
          "entityType": "page",
          "name": "Infit pauci optio demo.",
          "description": "[{\"content\":[{\"type\":\"text\",\"text\":\"Adhaero torrens adfectus incidunt voluptates cornu tempus eaque universe volubilis. Cubo sponte utpote crux pecco. Cunctatio dolorum vallum ut adimpleo summa valde strenuus attonbitus eligendi.\\nVel cado vitae cibus dolores decet surgo. Accusamus praesentium cibus subito. Vox nemo ipsa video tremo molestias charisma clam ipsa suscipit.\",\"styles\":{}}],\"children\":[]}]",
          "keywords": "solvo atrox tendo",
          "status": "unpublished",
          "parentId": null,
          "displayOrder": 32.69,
          "createdAt": "2024-08-06T10:28:33.226Z",
          "createdBy": "0f0ak5vkrrl687pmkwpa1vju",
          "modifiedAt": "2024-08-06T10:28:33.226Z",
          "modifiedBy": "0f0ak5vkrrl687pmkwpa1vju",
          "tx": {
            "id": "4tufkeho7gg1xwx21e333ngq",
            "sourceId": "src_ujcbpukfple60p8h3tnk9zpo",
            "version": 1,
            "fieldVersions": {}
          }
        }
      },
      {
        "status": 400,
        "description": "Bad request: problem processing request.",
        "name": "BadRequestError",
        "ref": "#/components/responses/BadRequestError",
        "contentType": "application/json"
      },
      {
        "status": 401,
        "description": "Unauthorized: authentication required.",
        "name": "UnauthorizedError",
        "ref": "#/components/responses/UnauthorizedError",
        "contentType": "application/json"
      },
      {
        "status": 403,
        "description": "Forbidden: insufficient permissions.",
        "name": "ForbiddenError",
        "ref": "#/components/responses/ForbiddenError",
        "contentType": "application/json"
      },
      {
        "status": 404,
        "description": "Not found: resource does not exist.",
        "name": "NotFoundError",
        "ref": "#/components/responses/NotFoundError",
        "contentType": "application/json"
      },
      {
        "status": 429,
        "description": "Rate limit: too many requests.",
        "name": "TooManyRequestsError",
        "ref": "#/components/responses/TooManyRequestsError",
        "contentType": "application/json"
      }
    ],
    "request": {
      "path": {
        "properties": {
          "id": { "type": "string", "required": true }
        }
      }
    }
  },
  {
    "operationId": "updatePage",
    "responses": [
      {
        "status": 200,
        "description": "Page updated",
        "name": "Page",
        "ref": "#/components/schemas/Page",
        "contentType": "application/json",
        "schema": {
          "type": "object",
          "properties": {
            "createdAt": { "type": "string", "required": true },
            "id": { "type": "string", "required": true },
            "entityType": {
              "type": "string",
              "required": true,
              "enum": ["page"]
            },
            "name": { "type": "string", "required": true },
            "description": {
              "type": ["string", "null"],
              "required": true
            },
            "modifiedAt": {
              "type": ["string", "null"],
              "required": true
            },
            "keywords": { "type": "string", "required": true },
            "createdBy": {
              "type": ["string", "null"],
              "required": true
            },
            "modifiedBy": {
              "type": ["string", "null"],
              "required": true
            },
            "tx": {
              "type": "object",
              "required": true,
              "properties": {
                "id": { "type": "string", "required": true },
                "sourceId": { "type": "string", "required": true },
                "version": { "type": "number", "required": true },
                "fieldVersions": { "type": "object", "required": true }
              }
            },
            "status": {
              "type": "string",
              "required": true,
              "enum": ["unpublished", "published", "archived"]
            },
            "parentId": {
              "type": ["string", "null"],
              "required": true
            },
            "displayOrder": {
              "type": "number",
              "required": true,
              "minimum": -140737488355328,
              "maximum": 140737488355327
            }
          },
          "ref": "#/components/schemas/Page",
          "contentType": "application/json"
        },
        "example": {
          "id": "co96vrmic3wbowmxzbqa1e9f",
          "entityType": "page",
          "name": "Infit pauci optio demo.",
          "description": "[{\"content\":[{\"type\":\"text\",\"text\":\"Adhaero torrens adfectus incidunt voluptates cornu tempus eaque universe volubilis. Cubo sponte utpote crux pecco. Cunctatio dolorum vallum ut adimpleo summa valde strenuus attonbitus eligendi.\\nVel cado vitae cibus dolores decet surgo. Accusamus praesentium cibus subito. Vox nemo ipsa video tremo molestias charisma clam ipsa suscipit.\",\"styles\":{}}],\"children\":[]}]",
          "keywords": "solvo atrox tendo",
          "status": "unpublished",
          "parentId": null,
          "displayOrder": 32.69,
          "createdAt": "2024-08-06T10:28:33.226Z",
          "createdBy": "0f0ak5vkrrl687pmkwpa1vju",
          "modifiedAt": "2024-08-06T10:28:33.226Z",
          "modifiedBy": "0f0ak5vkrrl687pmkwpa1vju",
          "tx": {
            "id": "4tufkeho7gg1xwx21e333ngq",
            "sourceId": "src_ujcbpukfple60p8h3tnk9zpo",
            "version": 1,
            "fieldVersions": {}
          }
        }
      },
      {
        "status": 400,
        "description": "Bad request: problem processing request.",
        "name": "BadRequestError",
        "ref": "#/components/responses/BadRequestError",
        "contentType": "application/json"
      },
      {
        "status": 401,
        "description": "Unauthorized: authentication required.",
        "name": "UnauthorizedError",
        "ref": "#/components/responses/UnauthorizedError",
        "contentType": "application/json"
      },
      {
        "status": 403,
        "description": "Forbidden: insufficient permissions.",
        "name": "ForbiddenError",
        "ref": "#/components/responses/ForbiddenError",
        "contentType": "application/json"
      },
      {
        "status": 404,
        "description": "Not found: resource does not exist.",
        "name": "NotFoundError",
        "ref": "#/components/responses/NotFoundError",
        "contentType": "application/json"
      },
      {
        "status": 429,
        "description": "Rate limit: too many requests.",
        "name": "TooManyRequestsError",
        "ref": "#/components/responses/TooManyRequestsError",
        "contentType": "application/json"
      }
    ],
    "request": {
      "path": {
        "properties": {
          "id": { "type": "string", "required": true }
        }
      },
      "body": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "required": false },
          "description": {
            "type": ["string", "null"],
            "required": false
          },
          "keywords": { "type": "string", "required": false },
          "displayOrder": {
            "type": "number",
            "required": false,
            "minimum": -140737488355328,
            "maximum": 140737488355327
          },
          "status": {
            "type": "string",
            "required": false,
            "enum": ["unpublished", "published", "archived"]
          },
          "parentId": {
            "type": ["string", "null"],
            "required": false
          },
          "tx": {
            "type": "object",
            "required": true,
            "properties": {
              "id": {
                "type": "string",
                "required": true,
                "description": "Unique mutation ID (nanoid)",
                "maxLength": 32
              },
              "sourceId": {
                "type": "string",
                "required": true,
                "description": "Tab/instance identifier for echo prevention",
                "maxLength": 64
              },
              "baseVersion": {
                "type": "integer",
                "required": true,
                "description": "Entity version when read (for conflict detection)",
                "minimum": 0
              }
            },
            "ref": "#/components/schemas/TxRequest"
          }
        },
        "required": true,
        "contentType": "application/json"
      }
    }
  }
]