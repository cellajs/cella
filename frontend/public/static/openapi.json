{
  "servers": [
    {
      "url": "http://localhost:4000"
    }
  ],
  "info": {
    "title": "Cella DEVELOPMENT API",
    "version": "v1",
    "description": "⚠️ ATTENTION: PRERELEASE!  \n                  This API is organized into modules based on logical domains (e.g. `auth`, `organizations`, `memberships`).\n                  Each module includes a set of endpoints that expose functionality related to a specific resource or cross resource logic.\n\n                  The documentation is generated from source code using `zod` schemas, converted into OpenAPI via `zod-openapi` and served through the `hono` framework.",
    "x-extensions": [
      {
        "key": "x-guard",
        "id": "xGuard",
        "translationKey": "common:docs.guard",
        "description": "Authorization middleware applied to the endpoint",
        "required": true,
        "values": {
          "isPublicAccess": {
            "description": "No authentication required"
          },
          "hasSystemAccess": {
            "description": "Requires system admin + IP whitelist"
          },
          "isAuthenticated": {
            "description": "Requires valid session"
          }
        }
      },
      {
        "key": "x-rate-limiter",
        "id": "xRateLimiter",
        "translationKey": "common:docs.rate_limiter",
        "description": "Rate limiting rules applied to the endpoint",
        "required": false,
        "values": {
          "spamLimiter": {
            "description": "Max 10 requests/hour per IP for email-sending endpoints"
          },
          "emailEnumLimiter": {
            "description": "Blocks IP for 30 min after 10 consecutive failures"
          },
          "passwordLimiter": {
            "description": "Blocks email/IP for 30 min after 10 consecutive failures"
          },
          "presignedUrlLimiter": {
            "description": "Max 2000 requests/hour per user/IP for presigned URLs"
          },
          "totpVerificationLimiter": {
            "description": "Blocks for 30 min after 5 failed TOTP attempts"
          },
          "passkeyChallengeLimiter": {
            "description": "Max 5 passkey challenges/hour per IP"
          },
          "tokenLimiter": {
            "description": "Blocks IP for 30 min after 10 consecutive token failures"
          }
        }
      }
    ]
  },
  "openapi": "3.1.0",
  "tags": [
    {
      "name": "me",
      "description": "Endpoints related to the *current user*, meaning the user associated with the active session making\n        the request. These routes are distinct from general `users` endpoints: while `users` may operate on\n        any user in the system, `me` endpoints are scoped exclusively to the *current user* and follow a\n        different authorization flow."
    },
    {
      "name": "users",
      "description": "Endpoints for managing *users* at the system level. Unlike context entities (such as\n        `organizations`), a `user` is a \"global\" entity and not scoped to a specific context. These endpoints\n        are intended for administrative operations on any user in the system."
    },
    {
      "name": "memberships",
      "description": "Endpoints for managing *memberships*, which represent one-to-one relationships between a\n        `user` and a contextual `entity` (e.g., an `organization`). Each membership includes role information\n        and status flags such as `archived` or `muted`. Memberships can also reference parent entities,\n        enabling hierarchical context."
    },
    {
      "name": "organizations",
      "description": "Endpoints for managing `organizations`, which are core context entities. Organizations are\n        the highest ancestor in the parent hierarchy. They define access boundaries and are often the minimal\n        primary scope for permission and resource management."
    },
    {
      "name": "requests",
      "description": "Endpoints for handling incoming *requests* such as contact form submissions, newsletter signups,\n        and waitlist entries."
    },
    {
      "name": "entities",
      "description": "Endpoints that operate across multiple *entity types*, such as `users` and `organizations`.\n        *Entities* are identifiable domain objects that may be contextual, hierarchical (with parent/child\n        relations), or actor-like. These endpoints offer shared logic across modules, including slug validation\n        and entity visibility."
    },
    {
      "name": "system",
      "description": "*System level* endpoints for administrative actions and platform wide functionality. These endpoints\n        support operations such as user invitations, file uploads, and webhook handling."
    },
    {
      "name": "auth",
      "description": "*Authentication* endpoints supporting multiple sign-in methods, including email/password, OAuth\n        (Google, Microsoft, GitHub), and passkeys (WebAuthn). These routes cover user sign-up, sign-in, password\n        recovery, email verification, account linking, and impersonation for system admins."
    },
    {
      "name": "attachments",
      "description": "Endpoints for managing file based *attachments* (e.g. images, PDFs, documents) linked to\n        entities such as organizations or users. Files are uploaded directly by the client; the API handles\n        metadata registration, linking, access, and preview utilities."
    },
    {
      "name": "pages",
      "description": "Endpoints for managing *pages*, which are product entities supporting realtime sync and offline\n        capabilities. Pages can be organized hierarchically and are used in /docs."
    },
    {
      "name": "metrics",
      "description": "Endpoints for retrieving system level statistics and basic observability data. Includes internal\n        metrics as well as simple, high level counts for entities such as `users` and `organizations`."
    },
    {
      "name": "activities",
      "description": "Endpoints for retrieving *activities* (audit log entries). Activities track create, update, and\n        delete operations across all resources. This serves as an audit trail and can be extended for webhook\n        delivery."
    }
  ],
  "components": {
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "cella-development-session-v1",
        "description": "Authentication cookie. Copy cookie from your network tab and paste it here. If you don't have it, you need to sign in or sign up first."
      }
    },
    "responses": {
      "BadRequestError": {
        "description": "Bad request: problem processing request.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/BadRequestError"
            }
          }
        }
      },
      "UnauthorizedError": {
        "description": "Unauthorized: authentication required.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/UnauthorizedError"
            }
          }
        }
      },
      "ForbiddenError": {
        "description": "Forbidden: insufficient permissions.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ForbiddenError"
            }
          }
        }
      },
      "NotFoundError": {
        "description": "Not found: resource does not exist.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/NotFoundError"
            }
          }
        }
      },
      "TooManyRequestsError": {
        "description": "Rate limit: too many requests.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/TooManyRequestsError"
            }
          }
        }
      }
    },
    "schemas": {
      "UserBase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdAt": {
            "type": "string"
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "slug": {
            "type": "string"
          },
          "thumbnailUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "bannerUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "entityType": {
            "type": "string",
            "enum": [
              "user"
            ]
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "createdAt",
          "modifiedAt",
          "slug",
          "thumbnailUrl",
          "bannerUrl",
          "email",
          "entityType"
        ],
        "description": "Base user schema with essential fields for identification and display."
      },
      "ContextEntityBase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdAt": {
            "type": "string"
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "entityType": {
            "type": "string",
            "enum": [
              "organization"
            ]
          },
          "slug": {
            "type": "string"
          },
          "thumbnailUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "bannerUrl": {
            "type": [
              "string",
              "null"
            ]
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "createdAt",
          "modifiedAt",
          "entityType",
          "slug",
          "thumbnailUrl",
          "bannerUrl"
        ]
      },
      "MembershipBase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "contextType": {
            "type": "string",
            "enum": [
              "organization"
            ]
          },
          "userId": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "member",
              "admin"
            ]
          },
          "archived": {
            "type": "boolean"
          },
          "muted": {
            "type": "boolean"
          },
          "order": {
            "type": "number",
            "minimum": -140737488355328,
            "maximum": 140737488355327
          },
          "organizationId": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "contextType",
          "userId",
          "role",
          "archived",
          "muted",
          "order",
          "organizationId"
        ]
      },
      "BadRequestError": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ApiError"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "enum": [
                  400
                ]
              }
            }
          }
        ],
        "description": "Error returned when the request is malformed or contains invalid data."
      },
      "ApiError": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "status": {
            "type": "integer",
            "minimum": 400,
            "maximum": 599
          },
          "severity": {
            "type": "string",
            "enum": [
              "fatal",
              "error",
              "warn",
              "info",
              "debug",
              "trace"
            ]
          },
          "entityType": {
            "type": "string",
            "enum": [
              "user",
              "organization",
              "attachment",
              "page"
            ]
          },
          "logId": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "method": {
            "type": "string"
          },
          "timestamp": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "organizationId": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "message",
          "type",
          "status",
          "severity"
        ]
      },
      "UnauthorizedError": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ApiError"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "enum": [
                  401
                ]
              }
            }
          }
        ],
        "description": "Error returned when authentication is missing or invalid."
      },
      "ForbiddenError": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ApiError"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "enum": [
                  403
                ]
              }
            }
          }
        ],
        "description": "Error returned when the user lacks permission for the requested action."
      },
      "NotFoundError": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ApiError"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "enum": [
                  404
                ]
              }
            }
          }
        ],
        "description": "Error returned when the requested resource cannot be found."
      },
      "TooManyRequestsError": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ApiError"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "enum": [
                  429
                ]
              }
            }
          }
        ],
        "description": "Error returned when rate limits are exceeded."
      },
      "Activity": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": [
              "string",
              "null"
            ]
          },
          "entityType": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "user",
              "organization",
              "attachment",
              "page",
              null
            ]
          },
          "resourceType": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "request",
              "membership",
              null
            ]
          },
          "action": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "create",
              "update",
              "delete",
              null
            ]
          },
          "tableName": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "entityId": {
            "type": [
              "string",
              "null"
            ]
          },
          "organizationId": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdAt": {
            "type": "string"
          },
          "changedKeys": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "null"
              },
              {
                "type": "object",
                "additionalProperties": {}
              },
              {
                "type": "array",
                "items": {}
              }
            ]
          }
        },
        "required": [
          "id",
          "userId",
          "entityType",
          "resourceType",
          "action",
          "tableName",
          "type",
          "entityId",
          "organizationId",
          "createdAt",
          "changedKeys"
        ],
        "example": {
          "id": "s933zhzgm8axl572xlcja86p",
          "userId": "qc8osclgd1300kpvq3dotk41",
          "entityType": "user",
          "resourceType": null,
          "action": "update",
          "tableName": "memberships",
          "type": "membership.updated",
          "entityId": "21rs6psa9stclacdgtonoqr1",
          "organizationId": "t2j8omleaz2pg8iwtnhw3666",
          "createdAt": "2024-10-11T19:21:02.239Z",
          "changedKeys": [
            "description",
            "name"
          ]
        }
      },
      "Me": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "systemRole": {
            "type": "string",
            "enum": [
              "admin",
              "user"
            ],
            "description": "Explain system role here"
          }
        },
        "required": [
          "user",
          "systemRole"
        ],
        "example": {
          "user": {
            "id": "7qgsnou9b80h3jlnu1j458h6",
            "entityType": "user",
            "name": "Mr. Odell Gislason",
            "firstName": "Odell",
            "lastName": "Gislason",
            "email": "odell.gislason@yahoo.com",
            "slug": "odellgislason57",
            "description": null,
            "thumbnailUrl": null,
            "bannerUrl": null,
            "language": "en",
            "newsletter": true,
            "mfaRequired": false,
            "userFlags": {},
            "createdAt": "2024-07-14T22:49:14.651Z",
            "modifiedAt": "2024-07-14T22:49:14.651Z",
            "modifiedBy": null,
            "lastStartedAt": "2024-07-14T22:49:14.651Z",
            "lastSignInAt": "2024-07-14T22:49:14.651Z",
            "lastSeenAt": "2024-07-14T22:49:14.651Z"
          },
          "systemRole": "user"
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "createdAt": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "entityType": {
            "type": "string",
            "enum": [
              "user"
            ]
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "slug": {
            "type": "string"
          },
          "thumbnailUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "bannerUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "mfaRequired": {
            "type": "boolean"
          },
          "firstName": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastName": {
            "type": [
              "string",
              "null"
            ]
          },
          "language": {
            "type": "string",
            "enum": [
              "en",
              "nl"
            ]
          },
          "newsletter": {
            "type": "boolean"
          },
          "userFlags": {
            "type": "object",
            "properties": {
              "finishedOnboarding": {
                "type": "boolean"
              }
            },
            "required": [
              "finishedOnboarding"
            ]
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastStartedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastSignInAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastSeenAt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "required": [
          "createdAt",
          "id",
          "entityType",
          "name",
          "description",
          "slug",
          "thumbnailUrl",
          "bannerUrl",
          "email",
          "mfaRequired",
          "firstName",
          "lastName",
          "language",
          "newsletter",
          "userFlags",
          "modifiedAt",
          "lastStartedAt",
          "lastSignInAt",
          "modifiedBy",
          "lastSeenAt"
        ],
        "example": {
          "id": "w6g7sfzetbhjls7m9dg1xzav",
          "entityType": "user",
          "name": "Franco Corwin",
          "firstName": "Franco",
          "lastName": "Corwin",
          "email": "franco_corwin@gmail.com",
          "slug": "francocorwin",
          "description": null,
          "thumbnailUrl": null,
          "bannerUrl": null,
          "language": "en",
          "newsletter": true,
          "mfaRequired": false,
          "userFlags": {},
          "createdAt": "2024-12-13T11:17:23.643Z",
          "modifiedAt": "2024-12-13T11:17:23.643Z",
          "modifiedBy": null,
          "lastStartedAt": "2024-12-13T11:17:23.643Z",
          "lastSignInAt": "2024-12-13T11:17:23.643Z",
          "lastSeenAt": "2024-12-13T11:17:23.643Z"
        }
      },
      "MeAuthData": {
        "type": "object",
        "properties": {
          "enabledOAuth": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "github"
              ]
            }
          },
          "hasTotp": {
            "type": "boolean"
          },
          "hasPassword": {
            "type": "boolean"
          },
          "sessions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "createdAt": {
                  "type": "string"
                },
                "id": {
                  "type": "string"
                },
                "type": {
                  "type": "string",
                  "enum": [
                    "regular",
                    "impersonation",
                    "mfa"
                  ]
                },
                "userId": {
                  "type": "string"
                },
                "deviceName": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "deviceType": {
                  "type": "string",
                  "enum": [
                    "desktop",
                    "mobile"
                  ]
                },
                "deviceOs": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "browser": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "authStrategy": {
                  "type": "string",
                  "enum": [
                    "github",
                    "google",
                    "microsoft",
                    "password",
                    "passkey",
                    "totp",
                    "email"
                  ]
                },
                "expiresAt": {
                  "type": "string"
                },
                "isCurrent": {
                  "type": "boolean"
                }
              },
              "required": [
                "createdAt",
                "id",
                "type",
                "userId",
                "deviceName",
                "deviceType",
                "deviceOs",
                "browser",
                "authStrategy",
                "expiresAt",
                "isCurrent"
              ]
            }
          },
          "passkeys": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string"
                },
                "userId": {
                  "type": "string"
                },
                "deviceName": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "deviceType": {
                  "type": "string",
                  "enum": [
                    "desktop",
                    "mobile"
                  ]
                },
                "deviceOs": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "browser": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "nameOnDevice": {
                  "type": "string"
                },
                "createdAt": {
                  "type": "string"
                }
              },
              "required": [
                "id",
                "userId",
                "deviceName",
                "deviceType",
                "deviceOs",
                "browser",
                "nameOnDevice",
                "createdAt"
              ]
            }
          }
        },
        "required": [
          "enabledOAuth",
          "hasTotp",
          "hasPassword",
          "sessions",
          "passkeys"
        ],
        "example": {
          "enabledOAuth": [
            "github"
          ],
          "hasTotp": false,
          "hasPassword": true,
          "sessions": [
            {
              "id": "1yyluhj040oyd732g8rl7t64",
              "userId": "ccb8qru6yupvx5ntxp604xgo",
              "type": "regular",
              "createdAt": "2024-05-29T08:00:36.178Z",
              "expiresAt": "2024-06-28T08:00:36.178Z",
              "deviceName": "Safari on iPhone",
              "deviceType": "mobile",
              "deviceOs": "Windows",
              "browser": "Safari",
              "authStrategy": "password",
              "isCurrent": true
            }
          ],
          "passkeys": []
        }
      },
      "InactiveMembership": {
        "type": "object",
        "properties": {
          "createdAt": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "contextType": {
            "type": "string",
            "enum": [
              "organization"
            ]
          },
          "email": {
            "type": "string"
          },
          "userId": {
            "type": [
              "string",
              "null"
            ]
          },
          "tokenId": {
            "type": [
              "string",
              "null"
            ]
          },
          "role": {
            "type": "string",
            "enum": [
              "member",
              "admin"
            ]
          },
          "rejectedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdBy": {
            "type": "string"
          },
          "organizationId": {
            "type": "string"
          },
          "uniqueKey": {
            "type": "string"
          }
        },
        "required": [
          "createdAt",
          "id",
          "contextType",
          "email",
          "userId",
          "tokenId",
          "role",
          "rejectedAt",
          "createdBy",
          "organizationId",
          "uniqueKey"
        ],
        "example": {
          "id": "ukxfca4ddim4bvuklzn5bszg",
          "contextType": "organization",
          "email": "belle.bashirian10@hotmail.com",
          "userId": "ne0c1n1xatbgsj5m94fa2zfj",
          "tokenId": "0w94eh4h0qgupj2wo2oz6c0e",
          "role": "member",
          "rejectedAt": null,
          "createdAt": "2024-02-08T11:19:07.168Z",
          "createdBy": "9v2n0dfrh6s450ooxn5tb992",
          "organizationId": "9angnio9zojjlzk3croh621f",
          "uniqueKey": "ne0c1n1xatbgsj5m94fa2zfj-9angnio9zojjlzk3croh621f"
        }
      },
      "SuccessWithRejectedItems": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "rejectedItems": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "success",
          "rejectedItems"
        ],
        "example": {
          "success": true,
          "rejectedItems": []
        }
      },
      "UploadToken": {
        "type": "object",
        "properties": {
          "public": {
            "type": "boolean"
          },
          "sub": {
            "type": "string"
          },
          "s3": {
            "type": "boolean"
          },
          "signature": {
            "type": "string"
          },
          "params": {
            "type": "object",
            "properties": {
              "auth": {
                "type": "object",
                "properties": {
                  "key": {
                    "type": "string"
                  },
                  "expires": {
                    "type": "string"
                  }
                },
                "required": [
                  "key"
                ]
              }
            },
            "required": [
              "auth"
            ],
            "additionalProperties": {}
          }
        },
        "required": [
          "public",
          "sub",
          "s3",
          "signature",
          "params"
        ],
        "example": {
          "public": false,
          "sub": "x1lsgegsw6imziogthaolhvy",
          "s3": true,
          "signature": "gVDbK1LX8P8h331cTbWcxbI0jNE5VeefPu4tppgCIGv475Bji47m4QdeTtGv8cYg",
          "params": {
            "auth": {
              "key": "uploads/kx5n7c1cush46z5cnizlmyd8",
              "expires": "2025-01-01T04:15:50.483Z"
            }
          }
        }
      },
      "Organization": {
        "type": "object",
        "properties": {
          "createdAt": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "entityType": {
            "type": "string",
            "enum": [
              "organization"
            ]
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "slug": {
            "type": "string"
          },
          "thumbnailUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "bannerUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "shortName": {
            "type": [
              "string",
              "null"
            ]
          },
          "country": {
            "type": [
              "string",
              "null"
            ]
          },
          "timezone": {
            "type": [
              "string",
              "null"
            ]
          },
          "defaultLanguage": {
            "type": "string",
            "enum": [
              "en",
              "nl"
            ]
          },
          "languages": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "en",
                "nl"
              ]
            },
            "minItems": 1
          },
          "notificationEmail": {
            "type": [
              "string",
              "null"
            ]
          },
          "emailDomains": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "color": {
            "type": [
              "string",
              "null"
            ]
          },
          "logoUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "websiteUrl": {
            "type": [
              "string",
              "null"
            ]
          },
          "welcomeText": {
            "type": [
              "string",
              "null"
            ]
          },
          "authStrategies": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "github",
                "google",
                "microsoft",
                "password",
                "passkey",
                "totp",
                "email"
              ]
            }
          },
          "chatSupport": {
            "type": "boolean"
          },
          "membership": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MembershipBase"
              },
              {
                "type": "null"
              }
            ]
          },
          "counts": {
            "type": "object",
            "properties": {
              "membership": {
                "type": "object",
                "properties": {
                  "admin": {
                    "type": "number"
                  },
                  "member": {
                    "type": "number"
                  },
                  "pending": {
                    "type": "number"
                  },
                  "total": {
                    "type": "number"
                  }
                },
                "required": [
                  "admin",
                  "member",
                  "pending",
                  "total"
                ]
              },
              "entities": {
                "type": "object",
                "properties": {
                  "attachment": {
                    "type": "number"
                  },
                  "page": {
                    "type": "number"
                  }
                },
                "required": [
                  "attachment",
                  "page"
                ]
              }
            },
            "required": [
              "membership",
              "entities"
            ]
          }
        },
        "required": [
          "createdAt",
          "id",
          "entityType",
          "name",
          "description",
          "modifiedAt",
          "slug",
          "thumbnailUrl",
          "bannerUrl",
          "createdBy",
          "modifiedBy",
          "shortName",
          "country",
          "timezone",
          "defaultLanguage",
          "languages",
          "notificationEmail",
          "emailDomains",
          "color",
          "logoUrl",
          "websiteUrl",
          "welcomeText",
          "authStrategies",
          "chatSupport",
          "membership",
          "counts"
        ],
        "example": {
          "id": "hmo9fwr239kqavr3yur671kl",
          "entityType": "organization",
          "name": "McClure, Dicki and Waters",
          "slug": "mcclure-dicki-and-waters",
          "description": "Open-source static website",
          "shortName": "McClure,",
          "country": "Guatemala",
          "timezone": "Africa/Dar_es_Salaam",
          "defaultLanguage": "en",
          "languages": [
            "en"
          ],
          "notificationEmail": "notifications@mcclure-dicki-and-waters.example",
          "emailDomains": [],
          "color": "#daf7e3",
          "thumbnailUrl": null,
          "logoUrl": "https://picsum.photos/seed/CGEa4RRQS/2665/3362",
          "bannerUrl": null,
          "websiteUrl": "https://mcclure-dicki-and-waters.example",
          "welcomeText": "Welcome to McClure, Dicki and Waters!",
          "authStrategies": [
            "password"
          ],
          "chatSupport": true,
          "createdAt": "2024-12-25T15:29:47.111Z",
          "createdBy": null,
          "modifiedAt": "2024-12-25T15:29:47.111Z",
          "modifiedBy": null,
          "restrictions": {
            "user": 1000,
            "attachment": 100,
            "page": 0
          },
          "membership": {
            "id": "kaba9fpc90mgtzmtjipw2v8s",
            "contextType": "organization",
            "userId": "w4hg4036vxzq0rzt4pucveps",
            "organizationId": "hmo9fwr239kqavr3yur671kl",
            "role": "admin",
            "order": 38,
            "muted": false,
            "archived": false
          },
          "counts": {
            "membership": {
              "admin": 3,
              "member": 0,
              "pending": 4,
              "total": 3
            },
            "entities": {
              "attachment": 4,
              "page": 0
            }
          }
        }
      },
      "Page": {
        "type": "object",
        "properties": {
          "createdAt": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "entityType": {
            "type": "string",
            "enum": [
              "page"
            ]
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "keywords": {
            "type": "string"
          },
          "createdBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "unpublished",
              "published",
              "archived"
            ]
          },
          "parentId": {
            "type": [
              "string",
              "null"
            ]
          },
          "displayOrder": {
            "type": "number",
            "minimum": -140737488355328,
            "maximum": 140737488355327
          }
        },
        "required": [
          "createdAt",
          "id",
          "entityType",
          "name",
          "description",
          "modifiedAt",
          "keywords",
          "createdBy",
          "modifiedBy",
          "status",
          "parentId",
          "displayOrder"
        ],
        "example": {
          "id": "co96vrmic3wbowmxzbqa1e9f",
          "entityType": "page",
          "name": "Infit pauci optio demo.",
          "description": "[{\"content\":[{\"type\":\"text\",\"text\":\"Adhaero torrens adfectus incidunt voluptates cornu tempus eaque universe volubilis. Cubo sponte utpote crux pecco. Cunctatio dolorum vallum ut adimpleo summa valde strenuus attonbitus eligendi.\\nVel cado vitae cibus dolores decet surgo. Accusamus praesentium cibus subito. Vox nemo ipsa video tremo molestias charisma clam ipsa suscipit.\",\"styles\":{}}],\"children\":[]}]",
          "keywords": "solvo atrox tendo",
          "status": "unpublished",
          "parentId": null,
          "displayOrder": 32.69,
          "createdAt": "2024-08-06T10:28:33.226Z",
          "createdBy": "0f0ak5vkrrl687pmkwpa1vju",
          "modifiedAt": "2024-08-06T10:28:33.226Z",
          "modifiedBy": "0f0ak5vkrrl687pmkwpa1vju"
        }
      },
      "Attachment": {
        "type": "object",
        "properties": {
          "createdAt": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "entityType": {
            "type": "string",
            "enum": [
              "attachment"
            ]
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "keywords": {
            "type": "string"
          },
          "createdBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "public": {
            "type": "boolean"
          },
          "bucketName": {
            "type": "string"
          },
          "groupId": {
            "type": [
              "string",
              "null"
            ]
          },
          "filename": {
            "type": "string"
          },
          "contentType": {
            "type": "string"
          },
          "convertedContentType": {
            "type": [
              "string",
              "null"
            ]
          },
          "size": {
            "type": "string"
          },
          "originalKey": {
            "type": "string"
          },
          "convertedKey": {
            "type": [
              "string",
              "null"
            ]
          },
          "thumbnailKey": {
            "type": [
              "string",
              "null"
            ]
          },
          "organizationId": {
            "type": "string"
          }
        },
        "required": [
          "createdAt",
          "id",
          "entityType",
          "name",
          "description",
          "modifiedAt",
          "keywords",
          "createdBy",
          "modifiedBy",
          "public",
          "bucketName",
          "groupId",
          "filename",
          "contentType",
          "convertedContentType",
          "size",
          "originalKey",
          "convertedKey",
          "thumbnailKey",
          "organizationId"
        ],
        "example": {
          "id": "og9ynkm3vp2mdgi3oeicogxv",
          "entityType": "attachment",
          "name": "yet_rightfully_lest.ogx",
          "description": null,
          "keywords": "pectus subvenio depromo",
          "public": false,
          "bucketName": "attachments",
          "groupId": null,
          "filename": "yet_rightfully_lest.ogx",
          "contentType": "video/mp2t",
          "convertedContentType": null,
          "size": "6046908",
          "originalKey": "uploads/ofr579y6bqnt152wowxrfkyy/yet_rightfully_lest.ogx",
          "convertedKey": null,
          "thumbnailKey": null,
          "createdAt": "2024-10-12T17:43:05.360Z",
          "createdBy": "0uwim8y2tppz7th9tol75wjz",
          "modifiedAt": "2024-10-12T17:43:05.360Z",
          "modifiedBy": "0uwim8y2tppz7th9tol75wjz",
          "organizationId": "8dwkbmpkeuemouu8t58r8fuj"
        }
      },
      "Membership": {
        "type": "object",
        "properties": {
          "createdAt": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "contextType": {
            "type": "string",
            "enum": [
              "organization"
            ]
          },
          "userId": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "member",
              "admin"
            ]
          },
          "createdBy": {
            "type": "string"
          },
          "modifiedAt": {
            "type": [
              "string",
              "null"
            ]
          },
          "modifiedBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "archived": {
            "type": "boolean"
          },
          "muted": {
            "type": "boolean"
          },
          "order": {
            "type": "number",
            "minimum": -140737488355328,
            "maximum": 140737488355327
          },
          "organizationId": {
            "type": "string"
          },
          "uniqueKey": {
            "type": "string"
          }
        },
        "required": [
          "createdAt",
          "id",
          "contextType",
          "userId",
          "role",
          "createdBy",
          "modifiedAt",
          "modifiedBy",
          "archived",
          "muted",
          "order",
          "organizationId",
          "uniqueKey"
        ],
        "example": {
          "id": "575b0vreys30k2k4z795uufw",
          "contextType": "organization",
          "userId": "xg7596t8jiy8d0v8irrljzhy",
          "organizationId": "7ul53b62aw5h7k6x44nbu2r5",
          "role": "member",
          "order": 49,
          "muted": false,
          "archived": false,
          "createdAt": "2024-10-28T14:52:59.502Z",
          "createdBy": "xg7596t8jiy8d0v8irrljzhy",
          "modifiedAt": "2024-10-28T14:52:59.502Z",
          "modifiedBy": null,
          "uniqueKey": "xg7596t8jiy8d0v8irrljzhy-7ul53b62aw5h7k6x44nbu2r5"
        }
      }
    },
    "parameters": {}
  },
  "paths": {
    "/activities": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getActivities",
        "tags": [
          "activities"
        ],
        "summary": "Get list of activities",
        "description": "Returns a paginated list of *activities* (audit log entries). Activities track create, update, and delete operations across all resources.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "type",
                "tableName"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "userId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "user",
                "organization",
                "attachment",
                "page"
              ]
            },
            "required": false,
            "name": "entityType",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "request",
                "membership"
              ]
            },
            "required": false,
            "name": "resourceType",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "create",
                "update",
                "delete"
              ]
            },
            "required": false,
            "name": "action",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "tableName",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "type",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "entityId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Activities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Activity"
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/check-email": {
      "post": {
        "security": [],
        "operationId": "checkEmail",
        "tags": [
          "auth"
        ],
        "summary": "Check if email exists",
        "description": "Checks if a user with the specified email address exists in the system.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "emailEnumLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                },
                "required": [
                  "email"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Email exists"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/invoke-token/{type}/{token}": {
      "get": {
        "security": [],
        "operationId": "invokeToken",
        "tags": [
          "auth"
        ],
        "summary": "Invoke token session",
        "description": "Validates and invokes a token (for password reset, email verification, invitations, mfa) and redirects user to backend with a one-purpose, single-use token session in a cookie.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "email-verification",
                "oauth-verification",
                "password-reset",
                "invitation",
                "confirm-mfa"
              ]
            },
            "required": true,
            "name": "type",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "token",
            "in": "path"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect with token session",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/token/{type}/{id}": {
      "get": {
        "security": [],
        "operationId": "getTokenData",
        "tags": [
          "auth"
        ],
        "summary": "Get token data",
        "description": "Get basic token data from single-use token session, It returns basic data if the session is still valid.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "email-verification",
                "oauth-verification",
                "password-reset",
                "invitation",
                "confirm-mfa"
              ]
            },
            "required": true,
            "name": "type",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Token is valid",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "userId": {
                      "type": "string"
                    },
                    "inactiveMembershipId": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "email"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/impersonation/start": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "startImpersonation",
        "tags": [
          "auth"
        ],
        "summary": "Start impersonating",
        "description": "Allows a system admin to impersonate a specific user by ID, returning a temporary impersonation session.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "targetUserId",
            "in": "query"
          }
        ],
        "responses": {
          "204": {
            "description": "Impersonating",
            "headers": {
              "Set-Cookie": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/impersonation/stop": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "stopImpersonation",
        "tags": [
          "auth"
        ],
        "summary": "Stop impersonating",
        "description": "Ends impersonation by clearing the current impersonation session and restoring the admin context.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "204": {
            "description": "Stopped impersonating"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/resend-invitation": {
      "post": {
        "security": [],
        "operationId": "resendInvitationWithToken",
        "tags": [
          "auth"
        ],
        "summary": "Resend invitation",
        "description": "Resends an invitation email with token to a new user using the provided email address and token ID.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "spamLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "email": {
                        "type": "string",
                        "format": "email"
                      },
                      "tokenId": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "email"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "email": {
                        "type": "string",
                        "format": "email"
                      },
                      "tokenId": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "tokenId"
                    ]
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Invitation email sent"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/sign-out": {
      "post": {
        "security": [],
        "operationId": "signOut",
        "tags": [
          "auth"
        ],
        "summary": "Sign out",
        "description": "Signs out the *current user* and clears the active session.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "responses": {
          "204": {
            "description": "User signed out"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/totp/generate-key": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "generateTotpKey",
        "tags": [
          "auth"
        ],
        "summary": "Generate TOTP key",
        "description": "Generates a new TOTP key for current user and returns a provisioning URI and Base32 manual key.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "200": {
            "description": "Challenge created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "totpUri": {
                      "type": "string"
                    },
                    "manualKey": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "totpUri",
                    "manualKey"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/totp": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "createTotp",
        "tags": [
          "auth"
        ],
        "summary": "Set TOTP",
        "description": "Confirms TOTP setup by verifying a code from the authenticator app for the first time. On success, TOTP is registered for current user.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "pattern": "^\\d{6}$"
                  }
                },
                "required": [
                  "code"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "TOTP created"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteTotp",
        "tags": [
          "auth"
        ],
        "summary": "Delete TOTP",
        "description": "Delete TOTP credential for current user.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "204": {
            "description": "TOTP deleted"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/totp-verification": {
      "post": {
        "security": [],
        "operationId": "signInWithTotp",
        "tags": [
          "auth"
        ],
        "summary": "Verify TOTP",
        "description": "Validates the TOTP code and completes TOTP based authentication.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "totpVerificationLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "pattern": "^\\d{6}$"
                  }
                },
                "required": [
                  "code"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "TOTP verified",
            "headers": {
              "Set-Cookie": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/sign-up": {
      "post": {
        "security": [],
        "operationId": "signUp",
        "tags": [
          "auth"
        ],
        "summary": "Sign up with password",
        "description": "Registers a new user using an email and password. Sends a verification email upon successful sign up.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "spamLimiter",
          "emailEnumLimiter"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "maxLength": 100
                  }
                },
                "required": [
                  "email",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User signed up",
            "headers": {
              "Set-Cookie": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "302": {
            "description": "Redirect to frontend",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/sign-up/{tokenId}": {
      "post": {
        "security": [],
        "operationId": "signUpWithToken",
        "tags": [
          "auth"
        ],
        "summary": "Sign up to accept invite",
        "description": "Registers a user using an email and password in response to a system or organization invitation.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter",
          "emailEnumLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "tokenId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "maxLength": 100
                  }
                },
                "required": [
                  "email",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User signed up",
            "headers": {
              "Set-Cookie": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "membershipInvite": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "membershipInvite"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/request-password": {
      "post": {
        "security": [],
        "operationId": "requestPassword",
        "tags": [
          "auth"
        ],
        "summary": "Request new password",
        "description": "Sends an email with a link to reset the user's password.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "spamLimiter",
          "emailEnumLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                },
                "required": [
                  "email"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Password reset email sent"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/create-password/{tokenId}": {
      "post": {
        "security": [],
        "operationId": "createPassword",
        "tags": [
          "auth"
        ],
        "summary": "Create password",
        "description": "Sets a new password using a single-use session token in cookie and grants a session immediately upon success.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "tokenId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "maxLength": 100
                  }
                },
                "required": [
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Password created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "mfa": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "mfa"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/sign-in": {
      "post": {
        "security": [],
        "operationId": "signIn",
        "tags": [
          "auth"
        ],
        "summary": "Sign in with password",
        "description": "Authenticates an existing user using their email and password.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "passwordLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "maxLength": 100
                  }
                },
                "required": [
                  "email",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User signed in",
            "headers": {
              "Set-Cookie": {
                "schema": {
                  "type": "string"
                },
                "required": false
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "emailVerified": {
                      "type": "boolean"
                    },
                    "mfa": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "emailVerified"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/passkey": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "createPasskey",
        "tags": [
          "auth"
        ],
        "summary": "Create passkey",
        "description": "Register a passkey for passwordless authentication by verifying a signed challenge and linking it to the *current user*. Multiple passkeys can be created for different devices/browsers.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "attestationObject": {
                    "type": "string"
                  },
                  "clientDataJSON": {
                    "type": "string"
                  },
                  "nameOnDevice": {
                    "type": "string"
                  }
                },
                "required": [
                  "attestationObject",
                  "clientDataJSON",
                  "nameOnDevice"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Passkey created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "userId": {
                      "type": "string"
                    },
                    "deviceName": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "deviceType": {
                      "type": "string",
                      "enum": [
                        "desktop",
                        "mobile"
                      ]
                    },
                    "deviceOs": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "browser": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "nameOnDevice": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "deviceName",
                    "deviceType",
                    "deviceOs",
                    "browser",
                    "nameOnDevice",
                    "createdAt"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/passkey/{id}": {
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deletePasskey",
        "tags": [
          "auth"
        ],
        "summary": "Delete passkey",
        "description": "Delete a passkey by id from the *current user*.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Passkey deleted"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/passkey/generate-challenge": {
      "post": {
        "security": [],
        "operationId": "generatePasskeyChallenge",
        "tags": [
          "auth"
        ],
        "summary": "Generate passkey challenge",
        "description": "Initiates the passkey registration or authentication flow by generating a device bound challenge.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "passkeyChallengeLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "authentication",
                      "mfa",
                      "registration"
                    ]
                  },
                  "email": {
                    "type": "string"
                  }
                },
                "required": [
                  "type"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Challenge generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "challengeBase64": {
                      "type": "string"
                    },
                    "credentialIds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "challengeBase64",
                    "credentialIds"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/passkey-verification": {
      "post": {
        "security": [],
        "operationId": "signInWithPasskey",
        "tags": [
          "auth"
        ],
        "summary": "Verify passkey",
        "description": "Validates the signed challenge and completes passkey based authentication.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "credentialId": {
                    "type": "string"
                  },
                  "clientDataJSON": {
                    "type": "string"
                  },
                  "authenticatorObject": {
                    "type": "string"
                  },
                  "signature": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "authentication",
                      "mfa"
                    ]
                  },
                  "email": {
                    "type": "string"
                  }
                },
                "required": [
                  "credentialId",
                  "clientDataJSON",
                  "authenticatorObject",
                  "signature",
                  "type"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Passkey verified",
            "headers": {
              "Set-Cookie": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/github": {
      "get": {
        "security": [],
        "operationId": "github",
        "tags": [
          "auth"
        ],
        "summary": "Authenticate with GitHub",
        "description": "Starts OAuth authentication with GitHub. Can be used for account connection, email verification, invitation process, defaults to authentication.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "auth",
                "connect",
                "invite",
                "verify"
              ],
              "default": "auth"
            },
            "required": false,
            "name": "type",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "redirectAfter",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to GitHub",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/google": {
      "get": {
        "security": [],
        "operationId": "google",
        "tags": [
          "auth"
        ],
        "summary": "Authenticate with Google",
        "description": "Starts OAuth authentication with Google. Can be used for account connection, email verification, invitation process, defaults to authentication.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "auth",
                "connect",
                "invite",
                "verify"
              ],
              "default": "auth"
            },
            "required": false,
            "name": "type",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "redirectAfter",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to Google",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/microsoft": {
      "get": {
        "security": [],
        "operationId": "microsoft",
        "tags": [
          "auth"
        ],
        "summary": "Authenticate with Microsoft",
        "description": "Starts OAuth authentication with Microsoft. Can be used for account connection, email verification, invitation process, defaults to authentication.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "auth",
                "connect",
                "invite",
                "verify"
              ],
              "default": "auth"
            },
            "required": false,
            "name": "type",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "redirectAfter",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to Microsoft",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/github/callback": {
      "get": {
        "security": [],
        "operationId": "githubCallback",
        "tags": [
          "auth"
        ],
        "summary": "Callback for GitHub",
        "description": "Handles GitHub OAuth callback, retrieves user identity, and establishes a session or links account.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "code",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "state",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "error",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "error_description",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "error_uri",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to frontend",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/google/callback": {
      "get": {
        "security": [],
        "operationId": "googleCallback",
        "tags": [
          "auth"
        ],
        "summary": "Callback for Google",
        "description": "Handles Google OAuth callback, retrieves user identity, and establishes a session or links account.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "code",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "state",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to frontend",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/auth/microsoft/callback": {
      "get": {
        "security": [],
        "operationId": "microsoftCallback",
        "tags": [
          "auth"
        ],
        "summary": "Callback for Microsoft",
        "description": "Handles Microsoft OAuth callback, retrieves user identity, and establishes a session or links account.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "code",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "state",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to frontend",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getMe",
        "tags": [
          "me"
        ],
        "summary": "Get self",
        "description": "Returns the *current user*.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "200": {
            "description": "User",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Me"
                },
                "example": {
                  "user": {
                    "id": "7qgsnou9b80h3jlnu1j458h6",
                    "entityType": "user",
                    "name": "Mr. Odell Gislason",
                    "firstName": "Odell",
                    "lastName": "Gislason",
                    "email": "odell.gislason@yahoo.com",
                    "slug": "odellgislason57",
                    "description": null,
                    "thumbnailUrl": null,
                    "bannerUrl": null,
                    "language": "en",
                    "newsletter": true,
                    "mfaRequired": false,
                    "userFlags": {},
                    "createdAt": "2024-07-14T22:49:14.651Z",
                    "modifiedAt": "2024-07-14T22:49:14.651Z",
                    "modifiedBy": null,
                    "lastStartedAt": "2024-07-14T22:49:14.651Z",
                    "lastSignInAt": "2024-07-14T22:49:14.651Z",
                    "lastSeenAt": "2024-07-14T22:49:14.651Z"
                  },
                  "systemRole": "user"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "updateMe",
        "tags": [
          "me"
        ],
        "summary": "Update self",
        "description": "Updates the *current user*.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "bannerUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "firstName": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "lastName": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "language": {
                    "type": "string",
                    "enum": [
                      "en",
                      "nl"
                    ]
                  },
                  "newsletter": {
                    "type": "boolean"
                  },
                  "thumbnailUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "slug": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "userFlags": {
                    "type": "object",
                    "properties": {
                      "finishedOnboarding": {
                        "type": "boolean"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": "w6g7sfzetbhjls7m9dg1xzav",
                  "entityType": "user",
                  "name": "Franco Corwin",
                  "firstName": "Franco",
                  "lastName": "Corwin",
                  "email": "franco_corwin@gmail.com",
                  "slug": "francocorwin",
                  "description": null,
                  "thumbnailUrl": null,
                  "bannerUrl": null,
                  "language": "en",
                  "newsletter": true,
                  "mfaRequired": false,
                  "userFlags": {},
                  "createdAt": "2024-12-13T11:17:23.643Z",
                  "modifiedAt": "2024-12-13T11:17:23.643Z",
                  "modifiedBy": null,
                  "lastStartedAt": "2024-12-13T11:17:23.643Z",
                  "lastSignInAt": "2024-12-13T11:17:23.643Z",
                  "lastSeenAt": "2024-12-13T11:17:23.643Z"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteMe",
        "tags": [
          "me"
        ],
        "summary": "Delete self",
        "description": "Deletes the *current user*. This also removes the user's memberships (cascade) and sets references to the user to `null` where applicable.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "204": {
            "description": "User deleted"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/mfa": {
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "toggleMfa",
        "tags": [
          "me"
        ],
        "summary": "Toggle MFA",
        "description": "Enable or disable multifactor authentication for the *current user*. Always requires passkey or TOTP reauthentication.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "passkeyData": {
                    "type": "object",
                    "properties": {
                      "credentialId": {
                        "type": "string"
                      },
                      "clientDataJSON": {
                        "type": "string"
                      },
                      "authenticatorObject": {
                        "type": "string"
                      },
                      "signature": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "credentialId",
                      "clientDataJSON",
                      "authenticatorObject",
                      "signature"
                    ]
                  },
                  "totpCode": {
                    "type": "string",
                    "pattern": "^\\d{6}$"
                  },
                  "mfaRequired": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "mfaRequired"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": "w6g7sfzetbhjls7m9dg1xzav",
                  "entityType": "user",
                  "name": "Franco Corwin",
                  "firstName": "Franco",
                  "lastName": "Corwin",
                  "email": "franco_corwin@gmail.com",
                  "slug": "francocorwin",
                  "description": null,
                  "thumbnailUrl": null,
                  "bannerUrl": null,
                  "language": "en",
                  "newsletter": true,
                  "mfaRequired": false,
                  "userFlags": {},
                  "createdAt": "2024-12-13T11:17:23.643Z",
                  "modifiedAt": "2024-12-13T11:17:23.643Z",
                  "modifiedBy": null,
                  "lastStartedAt": "2024-12-13T11:17:23.643Z",
                  "lastSignInAt": "2024-12-13T11:17:23.643Z",
                  "lastSeenAt": "2024-12-13T11:17:23.643Z"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/auth": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getMyAuth",
        "tags": [
          "me"
        ],
        "summary": "Get auth data",
        "description": "Returns authentication related data of *current user*, including sessions, OAuth accounts, and sign in options.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "200": {
            "description": "User sign-up info",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MeAuthData"
                },
                "example": {
                  "enabledOAuth": [
                    "github"
                  ],
                  "hasTotp": false,
                  "hasPassword": true,
                  "sessions": [
                    {
                      "id": "1yyluhj040oyd732g8rl7t64",
                      "userId": "ccb8qru6yupvx5ntxp604xgo",
                      "type": "regular",
                      "createdAt": "2024-05-29T08:00:36.178Z",
                      "expiresAt": "2024-06-28T08:00:36.178Z",
                      "deviceName": "Safari on iPhone",
                      "deviceType": "mobile",
                      "deviceOs": "Windows",
                      "browser": "Safari",
                      "authStrategy": "password",
                      "isCurrent": true
                    }
                  ],
                  "passkeys": []
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/invitations": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getMyInvitations",
        "tags": [
          "me"
        ],
        "summary": "Get list of invitations",
        "description": "Returns a list of pending memberships with entity data.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "responses": {
          "200": {
            "description": "Invitations pending",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "entity": {
                            "$ref": "#/components/schemas/ContextEntityBase"
                          },
                          "inactiveMembership": {
                            "$ref": "#/components/schemas/InactiveMembership"
                          }
                        },
                        "required": [
                          "entity",
                          "inactiveMembership"
                        ]
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/sessions": {
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteMySessions",
        "tags": [
          "me"
        ],
        "summary": "Terminate sessions",
        "description": "Ends one or more sessions for the *current user* based on provided session IDs.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessWithRejectedItems"
                },
                "example": {
                  "success": true,
                  "rejectedItems": []
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/leave": {
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteMyMembership",
        "tags": [
          "me"
        ],
        "summary": "Leave entity",
        "description": "Removes the *current user* from an entity they are a member of.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "organization"
              ]
            },
            "required": true,
            "name": "entityType",
            "in": "query"
          }
        ],
        "responses": {
          "204": {
            "description": "Membership removed"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/upload-token": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getUploadToken",
        "tags": [
          "me"
        ],
        "summary": "Get upload token",
        "description": "Generates and returns an upload token for uploading files or images to a private S3 bucket, scoped to the *current user* and organization",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "boolean"
                }
              ],
              "default": "false"
            },
            "required": false,
            "name": "public",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "organizationId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "avatar",
                "cover",
                "attachment"
              ]
            },
            "required": true,
            "name": "templateId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Upload token with a scope for a user or organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadToken"
                },
                "example": {
                  "public": false,
                  "sub": "x1lsgegsw6imziogthaolhvy",
                  "s3": true,
                  "signature": "gVDbK1LX8P8h331cTbWcxbI0jNE5VeefPu4tppgCIGv475Bji47m4QdeTtGv8cYg",
                  "params": {
                    "auth": {
                      "key": "uploads/kx5n7c1cush46z5cnizlmyd8",
                      "expires": "2025-01-01T04:15:50.483Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/me/unsubscribe": {
      "get": {
        "security": [],
        "operationId": "unsubscribeMe",
        "tags": [
          "me"
        ],
        "summary": "Unsubscribe",
        "description": "Unsubscribes the user from email notifications using a personal unsubscribe token. No authentication is required, as the token implicitly identifies the *current user*.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "token",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to FE",
            "headers": {
              "Location": {
                "schema": {
                  "type": "string"
                },
                "required": true
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/users": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getUsers",
        "tags": [
          "users"
        ],
        "summary": "Get list of users",
        "description": "Returns a list of *users*.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "name",
                "email",
                "role",
                "createdAt",
                "lastSeenAt"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "admin"
              ]
            },
            "required": false,
            "name": "role",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "organization"
              ]
            },
            "required": false,
            "name": "targetEntityType",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "targetEntityId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "$ref": "#/components/schemas/User"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "memberships": {
                                "type": "array",
                                "items": {
                                  "$ref": "#/components/schemas/MembershipBase"
                                }
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "admin"
                                ]
                              }
                            },
                            "required": [
                              "memberships"
                            ]
                          }
                        ],
                        "example": {
                          "id": "w6g7sfzetbhjls7m9dg1xzav",
                          "entityType": "user",
                          "name": "Franco Corwin",
                          "firstName": "Franco",
                          "lastName": "Corwin",
                          "email": "franco_corwin@gmail.com",
                          "slug": "francocorwin",
                          "description": null,
                          "thumbnailUrl": null,
                          "bannerUrl": null,
                          "language": "en",
                          "newsletter": true,
                          "mfaRequired": false,
                          "userFlags": {},
                          "createdAt": "2024-12-13T11:17:23.643Z",
                          "modifiedAt": "2024-12-13T11:17:23.643Z",
                          "modifiedBy": null,
                          "lastStartedAt": "2024-12-13T11:17:23.643Z",
                          "lastSignInAt": "2024-12-13T11:17:23.643Z",
                          "lastSeenAt": "2024-12-13T11:17:23.643Z"
                        }
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteUsers",
        "tags": [
          "users"
        ],
        "summary": "Delete users",
        "description": "Deletes one or more *users* from the system based on a list of IDs. This also removes the user's memberships (cascade) and sets references to the user to `null` where applicable.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessWithRejectedItems"
                },
                "example": {
                  "success": true,
                  "rejectedItems": []
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/users/{idOrSlug}": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getUser",
        "tags": [
          "users"
        ],
        "summary": "Get user",
        "description": "Retrieves a *user* by ID or slug.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "User",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": "w6g7sfzetbhjls7m9dg1xzav",
                  "entityType": "user",
                  "name": "Franco Corwin",
                  "firstName": "Franco",
                  "lastName": "Corwin",
                  "email": "franco_corwin@gmail.com",
                  "slug": "francocorwin",
                  "description": null,
                  "thumbnailUrl": null,
                  "bannerUrl": null,
                  "language": "en",
                  "newsletter": true,
                  "mfaRequired": false,
                  "userFlags": {},
                  "createdAt": "2024-12-13T11:17:23.643Z",
                  "modifiedAt": "2024-12-13T11:17:23.643Z",
                  "modifiedBy": null,
                  "lastStartedAt": "2024-12-13T11:17:23.643Z",
                  "lastSignInAt": "2024-12-13T11:17:23.643Z",
                  "lastSeenAt": "2024-12-13T11:17:23.643Z"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "updateUser",
        "tags": [
          "users"
        ],
        "summary": "Update user",
        "description": "Updates a *user* identified by ID or slug.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "bannerUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "firstName": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "lastName": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "language": {
                    "type": "string",
                    "enum": [
                      "en",
                      "nl"
                    ]
                  },
                  "newsletter": {
                    "type": "boolean"
                  },
                  "thumbnailUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "slug": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": "w6g7sfzetbhjls7m9dg1xzav",
                  "entityType": "user",
                  "name": "Franco Corwin",
                  "firstName": "Franco",
                  "lastName": "Corwin",
                  "email": "franco_corwin@gmail.com",
                  "slug": "francocorwin",
                  "description": null,
                  "thumbnailUrl": null,
                  "bannerUrl": null,
                  "language": "en",
                  "newsletter": true,
                  "mfaRequired": false,
                  "userFlags": {},
                  "createdAt": "2024-12-13T11:17:23.643Z",
                  "modifiedAt": "2024-12-13T11:17:23.643Z",
                  "modifiedBy": null,
                  "lastStartedAt": "2024-12-13T11:17:23.643Z",
                  "lastSignInAt": "2024-12-13T11:17:23.643Z",
                  "lastSeenAt": "2024-12-13T11:17:23.643Z"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/organizations": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "createOrganization",
        "tags": [
          "organizations"
        ],
        "summary": "Create organization",
        "description": "Creates a new *organization*.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "slug": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  }
                },
                "required": [
                  "name",
                  "slug"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Organization was created",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Organization"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "membership": {
                          "$ref": "#/components/schemas/MembershipBase"
                        }
                      }
                    }
                  ],
                  "example": {
                    "id": "hmo9fwr239kqavr3yur671kl",
                    "entityType": "organization",
                    "name": "McClure, Dicki and Waters",
                    "slug": "mcclure-dicki-and-waters",
                    "description": "Open-source static website",
                    "shortName": "McClure,",
                    "country": "Guatemala",
                    "timezone": "Africa/Dar_es_Salaam",
                    "defaultLanguage": "en",
                    "languages": [
                      "en"
                    ],
                    "notificationEmail": "notifications@mcclure-dicki-and-waters.example",
                    "emailDomains": [],
                    "color": "#daf7e3",
                    "thumbnailUrl": null,
                    "logoUrl": "https://picsum.photos/seed/CGEa4RRQS/2665/3362",
                    "bannerUrl": null,
                    "websiteUrl": "https://mcclure-dicki-and-waters.example",
                    "welcomeText": "Welcome to McClure, Dicki and Waters!",
                    "authStrategies": [
                      "password"
                    ],
                    "chatSupport": true,
                    "createdAt": "2024-12-25T15:29:47.111Z",
                    "createdBy": null,
                    "modifiedAt": "2024-12-25T15:29:47.111Z",
                    "modifiedBy": null,
                    "restrictions": {
                      "user": 1000,
                      "attachment": 100,
                      "page": 0
                    },
                    "membership": {
                      "id": "kaba9fpc90mgtzmtjipw2v8s",
                      "contextType": "organization",
                      "userId": "w4hg4036vxzq0rzt4pucveps",
                      "organizationId": "hmo9fwr239kqavr3yur671kl",
                      "role": "admin",
                      "order": 38,
                      "muted": false,
                      "archived": false
                    },
                    "counts": {
                      "membership": {
                        "admin": 3,
                        "member": 0,
                        "pending": 4,
                        "total": 3
                      },
                      "entities": {
                        "attachment": 4,
                        "page": 0
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getOrganizations",
        "tags": [
          "organizations"
        ],
        "summary": "Get list of organizations",
        "description": "Returns a list of *organizations*.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "name",
                "createdAt"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "userId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "member",
                "admin"
              ]
            },
            "required": false,
            "name": "role",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ]
            },
            "required": false,
            "name": "excludeArchived",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Organizations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Organization"
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteOrganizations",
        "tags": [
          "organizations"
        ],
        "summary": "Delete organizations",
        "description": "Deletes one or more *organizations* by ID.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessWithRejectedItems"
                },
                "example": {
                  "success": true,
                  "rejectedItems": []
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/organizations/{idOrSlug}": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getOrganization",
        "tags": [
          "organizations"
        ],
        "summary": "Get organization",
        "description": "Retrieves an *organization* by ID or slug.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Organization"
                },
                "example": {
                  "id": "hmo9fwr239kqavr3yur671kl",
                  "entityType": "organization",
                  "name": "McClure, Dicki and Waters",
                  "slug": "mcclure-dicki-and-waters",
                  "description": "Open-source static website",
                  "shortName": "McClure,",
                  "country": "Guatemala",
                  "timezone": "Africa/Dar_es_Salaam",
                  "defaultLanguage": "en",
                  "languages": [
                    "en"
                  ],
                  "notificationEmail": "notifications@mcclure-dicki-and-waters.example",
                  "emailDomains": [],
                  "color": "#daf7e3",
                  "thumbnailUrl": null,
                  "logoUrl": "https://picsum.photos/seed/CGEa4RRQS/2665/3362",
                  "bannerUrl": null,
                  "websiteUrl": "https://mcclure-dicki-and-waters.example",
                  "welcomeText": "Welcome to McClure, Dicki and Waters!",
                  "authStrategies": [
                    "password"
                  ],
                  "chatSupport": true,
                  "createdAt": "2024-12-25T15:29:47.111Z",
                  "createdBy": null,
                  "modifiedAt": "2024-12-25T15:29:47.111Z",
                  "modifiedBy": null,
                  "restrictions": {
                    "user": 1000,
                    "attachment": 100,
                    "page": 0
                  },
                  "membership": {
                    "id": "kaba9fpc90mgtzmtjipw2v8s",
                    "contextType": "organization",
                    "userId": "w4hg4036vxzq0rzt4pucveps",
                    "organizationId": "hmo9fwr239kqavr3yur671kl",
                    "role": "admin",
                    "order": 38,
                    "muted": false,
                    "archived": false
                  },
                  "counts": {
                    "membership": {
                      "admin": 5,
                      "member": 9,
                      "pending": 0,
                      "total": 14
                    },
                    "entities": {
                      "attachment": 21,
                      "page": 24
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "updateOrganization",
        "tags": [
          "organizations"
        ],
        "summary": "Update organization",
        "description": "Updates an *organization* by ID or slug.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "slug": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "name": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "shortName": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "country": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "timezone": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "defaultLanguage": {
                    "type": "string",
                    "enum": [
                      "en",
                      "nl"
                    ]
                  },
                  "languages": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "en",
                        "nl"
                      ]
                    },
                    "minItems": 1
                  },
                  "notificationEmail": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "emailDomains": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 4,
                      "maxLength": 100
                    }
                  },
                  "color": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "thumbnailUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "logoUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "bannerUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "websiteUrl": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "welcomeText": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "authStrategies": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "github",
                        "google",
                        "microsoft",
                        "password",
                        "passkey",
                        "totp",
                        "email"
                      ]
                    }
                  },
                  "chatSupport": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Organization was updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Organization"
                },
                "example": {
                  "id": "hmo9fwr239kqavr3yur671kl",
                  "entityType": "organization",
                  "name": "McClure, Dicki and Waters",
                  "slug": "mcclure-dicki-and-waters",
                  "description": "Open-source static website",
                  "shortName": "McClure,",
                  "country": "Guatemala",
                  "timezone": "Africa/Dar_es_Salaam",
                  "defaultLanguage": "en",
                  "languages": [
                    "en"
                  ],
                  "notificationEmail": "notifications@mcclure-dicki-and-waters.example",
                  "emailDomains": [],
                  "color": "#daf7e3",
                  "thumbnailUrl": null,
                  "logoUrl": "https://picsum.photos/seed/CGEa4RRQS/2665/3362",
                  "bannerUrl": null,
                  "websiteUrl": "https://mcclure-dicki-and-waters.example",
                  "welcomeText": "Welcome to McClure, Dicki and Waters!",
                  "authStrategies": [
                    "password"
                  ],
                  "chatSupport": true,
                  "createdAt": "2024-12-25T15:29:47.111Z",
                  "createdBy": null,
                  "modifiedAt": "2024-12-25T15:29:47.111Z",
                  "modifiedBy": null,
                  "restrictions": {
                    "user": 1000,
                    "attachment": 100,
                    "page": 0
                  },
                  "membership": {
                    "id": "kaba9fpc90mgtzmtjipw2v8s",
                    "contextType": "organization",
                    "userId": "w4hg4036vxzq0rzt4pucveps",
                    "organizationId": "hmo9fwr239kqavr3yur671kl",
                    "role": "admin",
                    "order": 38,
                    "muted": false,
                    "archived": false
                  },
                  "counts": {
                    "membership": {
                      "admin": 5,
                      "member": 9,
                      "pending": 0,
                      "total": 14
                    },
                    "entities": {
                      "attachment": 21,
                      "page": 24
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/pages/sync-pages": {
      "get": {
        "security": [],
        "operationId": "syncPages",
        "tags": [
          "pages"
        ],
        "summary": "Sync pages",
        "description": "Sync page data by proxying requests to ElectricSQL's shape endpoint for `pages` table.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "table",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "handle",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "cursor",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "live",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "where",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/pages": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "createPage",
        "tags": [
          "pages"
        ],
        "summary": "Create pages",
        "description": "Insert one or more new *pages*.",
        "x-guard": [
          "isAuthenticated",
          "isSystemAdmin"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Page",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Page"
                },
                "example": {
                  "id": "co96vrmic3wbowmxzbqa1e9f",
                  "entityType": "page",
                  "name": "Infit pauci optio demo.",
                  "description": "[{\"content\":[{\"type\":\"text\",\"text\":\"Adhaero torrens adfectus incidunt voluptates cornu tempus eaque universe volubilis. Cubo sponte utpote crux pecco. Cunctatio dolorum vallum ut adimpleo summa valde strenuus attonbitus eligendi.\\nVel cado vitae cibus dolores decet surgo. Accusamus praesentium cibus subito. Vox nemo ipsa video tremo molestias charisma clam ipsa suscipit.\",\"styles\":{}}],\"children\":[]}]",
                  "keywords": "solvo atrox tendo",
                  "status": "unpublished",
                  "parentId": null,
                  "displayOrder": 32.69,
                  "createdAt": "2024-08-06T10:28:33.226Z",
                  "createdBy": "0f0ak5vkrrl687pmkwpa1vju",
                  "modifiedAt": "2024-08-06T10:28:33.226Z",
                  "modifiedBy": "0f0ak5vkrrl687pmkwpa1vju"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "get": {
        "security": [],
        "operationId": "getPages",
        "tags": [
          "pages"
        ],
        "summary": "Get pages",
        "description": "Get all matching *pages*.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "name",
                "status",
                "createdAt"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Pages",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Page"
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deletePages",
        "tags": [
          "pages"
        ],
        "summary": "Delete pages",
        "description": "Delete one or more *pages* by ID.",
        "x-guard": [
          "isAuthenticated",
          "isSystemAdmin"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Page(s) deleted"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/pages/{id}": {
      "get": {
        "security": [],
        "operationId": "getPage",
        "tags": [
          "pages"
        ],
        "summary": "Get page",
        "description": "Get a single *page* by ID.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Page",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Page"
                },
                "example": {
                  "id": "co96vrmic3wbowmxzbqa1e9f",
                  "entityType": "page",
                  "name": "Infit pauci optio demo.",
                  "description": "[{\"content\":[{\"type\":\"text\",\"text\":\"Adhaero torrens adfectus incidunt voluptates cornu tempus eaque universe volubilis. Cubo sponte utpote crux pecco. Cunctatio dolorum vallum ut adimpleo summa valde strenuus attonbitus eligendi.\\nVel cado vitae cibus dolores decet surgo. Accusamus praesentium cibus subito. Vox nemo ipsa video tremo molestias charisma clam ipsa suscipit.\",\"styles\":{}}],\"children\":[]}]",
                  "keywords": "solvo atrox tendo",
                  "status": "unpublished",
                  "parentId": null,
                  "displayOrder": 32.69,
                  "createdAt": "2024-08-06T10:28:33.226Z",
                  "createdBy": "0f0ak5vkrrl687pmkwpa1vju",
                  "modifiedAt": "2024-08-06T10:28:33.226Z",
                  "modifiedBy": "0f0ak5vkrrl687pmkwpa1vju"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "updatePage",
        "tags": [
          "pages"
        ],
        "summary": "Update page",
        "description": "Update a single *page* by ID.",
        "x-guard": [
          "isAuthenticated",
          "isSystemAdmin"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "keywords": {
                    "type": "string"
                  },
                  "displayOrder": {
                    "type": "number",
                    "minimum": -140737488355328,
                    "maximum": 140737488355327
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "unpublished",
                      "published",
                      "archived"
                    ]
                  },
                  "parentId": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Page updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Page"
                },
                "example": {
                  "id": "co96vrmic3wbowmxzbqa1e9f",
                  "entityType": "page",
                  "name": "Infit pauci optio demo.",
                  "description": "[{\"content\":[{\"type\":\"text\",\"text\":\"Adhaero torrens adfectus incidunt voluptates cornu tempus eaque universe volubilis. Cubo sponte utpote crux pecco. Cunctatio dolorum vallum ut adimpleo summa valde strenuus attonbitus eligendi.\\nVel cado vitae cibus dolores decet surgo. Accusamus praesentium cibus subito. Vox nemo ipsa video tremo molestias charisma clam ipsa suscipit.\",\"styles\":{}}],\"children\":[]}]",
                  "keywords": "solvo atrox tendo",
                  "status": "unpublished",
                  "parentId": null,
                  "displayOrder": 32.69,
                  "createdAt": "2024-08-06T10:28:33.226Z",
                  "createdBy": "0f0ak5vkrrl687pmkwpa1vju",
                  "modifiedAt": "2024-08-06T10:28:33.226Z",
                  "modifiedBy": "0f0ak5vkrrl687pmkwpa1vju"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/entities/check-slug": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "checkSlug",
        "tags": [
          "entities"
        ],
        "summary": "Check slug availability",
        "description": "Checks whether a given slug is available across all entity types (e.g. *organizations*, *users*).\n      Primarily used to prevent slug collisions before creating or updating an entity.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "slug": {
                    "type": "string"
                  },
                  "entityType": {
                    "type": "string",
                    "enum": [
                      "user",
                      "organization"
                    ]
                  }
                },
                "required": [
                  "slug",
                  "entityType"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Slug is available"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/system/invite": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "systemInvite",
        "tags": [
          "system"
        ],
        "summary": "Invite to system",
        "description": "Invites one or more users to the system via email. Can be used to onboard system level users or admins.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "emails": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "email"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "emails"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitations are sent",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessWithRejectedItems"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "invitesSentCount": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "invitesSentCount"
                      ]
                    }
                  ],
                  "example": {
                    "success": true,
                    "rejectedItems": []
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/system/presigned-url": {
      "get": {
        "security": [],
        "operationId": "getPresignedUrl",
        "tags": [
          "system"
        ],
        "summary": "Get presigned URL",
        "description": "Generates and returns a presigned URL for uploading files to an S3 bucket.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "presignedUrlLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "key",
            "in": "query"
          },
          {
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "string"
                }
              ],
              "default": false
            },
            "required": false,
            "name": "isPublic",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Presigned URL",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/system/paddle-webhook": {
      "post": {
        "security": [],
        "operationId": "paddleWebhook",
        "tags": [
          "system"
        ],
        "summary": "Paddle webhook (WIP)",
        "description": "Receives and handles Paddle subscription events such as purchases, renewals, and cancellations.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {}
            }
          }
        },
        "responses": {
          "204": {
            "description": "Paddle webhook received"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/system/newsletter": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "sendNewsletter",
        "tags": [
          "system"
        ],
        "summary": "Newsletter to members",
        "description": "Sends a newsletter to members of one or more specified organizations.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "boolean"
                }
              ],
              "default": "false"
            },
            "required": false,
            "name": "toSelf",
            "in": "query"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "organizationIds": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "roles": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "member",
                        "admin"
                      ]
                    },
                    "minItems": 1
                  },
                  "subject": {
                    "type": "string"
                  },
                  "content": {
                    "type": "string"
                  }
                },
                "required": [
                  "organizationIds",
                  "roles",
                  "subject",
                  "content"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Newsletter sent"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/requests": {
      "post": {
        "security": [],
        "operationId": "createRequest",
        "tags": [
          "requests"
        ],
        "summary": "Create request",
        "description": "Submits a new *request* to the system. Supported types include contact form, newsletter signup, and waitlist entry.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "emailEnumLimiter",
          "spamLimiter"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "waitlist",
                      "newsletter",
                      "contact"
                    ]
                  },
                  "message": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "required": [
                  "email",
                  "type",
                  "message"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "createdAt": {
                      "type": "string"
                    },
                    "id": {
                      "type": "string"
                    },
                    "message": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "email": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "waitlist",
                        "newsletter",
                        "contact"
                      ]
                    },
                    "wasInvited": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "createdAt",
                    "id",
                    "message",
                    "email",
                    "type",
                    "wasInvited"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getRequests",
        "tags": [
          "requests"
        ],
        "summary": "Get list of requests",
        "description": "Returns a list of submitted *requests* across all types: contact form, newsletter, and waitlist.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "email",
                "type",
                "createdAt"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "createdAt": {
                            "type": "string"
                          },
                          "id": {
                            "type": "string"
                          },
                          "message": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "email": {
                            "type": "string"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "waitlist",
                              "newsletter",
                              "contact"
                            ]
                          },
                          "wasInvited": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "createdAt",
                          "id",
                          "message",
                          "email",
                          "type",
                          "wasInvited"
                        ]
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteRequests",
        "tags": [
          "requests"
        ],
        "summary": "Delete requests",
        "description": "Deletes one or more *requests* from the system by their IDs.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requests deleted"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getMetrics",
        "tags": [
          "metrics"
        ],
        "summary": "Get metrics",
        "description": "EXPERIMENTAL. Returns raw system observability data (e.g. node level statistics or runtime insights).\n      Primarily intended for internal monitoring and diagnostics.",
        "x-guard": [
          "isAuthenticated",
          "hasSystemAccess"
        ],
        "x-rate-limiter": [],
        "responses": {
          "200": {
            "description": "Metrics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "date": {
                        "type": "string"
                      },
                      "count": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "date",
                      "count"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/metrics/public": {
      "get": {
        "security": [],
        "operationId": "getPublicCounts",
        "tags": [
          "metrics"
        ],
        "summary": "Get public counts",
        "description": "Returns basic count metrics for entity types such as `users` and `organizations`.\n      This endpoint is public and uses a 1 minute in memory cache for performance.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [],
        "responses": {
          "200": {
            "description": "Public counts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "number"
                    },
                    "organization": {
                      "type": "number"
                    },
                    "attachment": {
                      "type": "number"
                    },
                    "page": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "user",
                    "organization",
                    "attachment",
                    "page"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/attachments/sync-attachments": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "syncAttachments",
        "tags": [
          "attachments"
        ],
        "summary": "Sync attachments",
        "description": "Sync attachment data by proxying requests to ElectricSQL's shape endpoint for `attachments` table.\n      Organization parameter is required to scope the data.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "table",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "handle",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "cursor",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "live",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "where",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/attachments": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "createAttachment",
        "tags": [
          "attachments"
        ],
        "summary": "Create attachments",
        "description": "Registers one or more new *attachments* after client side upload. Includes metadata like name, type, and linked entity.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "createdAt": {
                      "type": "string"
                    },
                    "id": {
                      "type": "string"
                    },
                    "entityType": {
                      "type": "string",
                      "enum": [
                        "attachment"
                      ]
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "modifiedAt": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "keywords": {
                      "type": "string"
                    },
                    "createdBy": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "modifiedBy": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "public": {
                      "type": "boolean"
                    },
                    "bucketName": {
                      "type": "string"
                    },
                    "groupId": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "filename": {
                      "type": "string"
                    },
                    "contentType": {
                      "type": "string"
                    },
                    "convertedContentType": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "size": {
                      "type": "string"
                    },
                    "originalKey": {
                      "type": "string"
                    },
                    "convertedKey": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "thumbnailKey": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "organizationId": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "keywords",
                    "bucketName",
                    "filename",
                    "contentType",
                    "size",
                    "originalKey",
                    "organizationId"
                  ]
                },
                "minItems": 1,
                "maxItems": 50
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Attachment",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Attachment"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteAttachments",
        "tags": [
          "attachments"
        ],
        "summary": "Delete attachments",
        "description": "Deletes one or more *attachment* records by ID. This does not delete the underlying file in storage.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessWithRejectedItems"
                },
                "example": {
                  "success": true,
                  "rejectedItems": []
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/attachments/{id}": {
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "updateAttachment",
        "tags": [
          "attachments"
        ],
        "summary": "Update attachment",
        "description": "Updates metadata of an *attachment*, such as its name or associated entity.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "originalKey": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Attachment was updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Attachment"
                },
                "example": {
                  "id": "og9ynkm3vp2mdgi3oeicogxv",
                  "entityType": "attachment",
                  "name": "yet_rightfully_lest.ogx",
                  "description": null,
                  "keywords": "pectus subvenio depromo",
                  "public": false,
                  "bucketName": "attachments",
                  "groupId": null,
                  "filename": "yet_rightfully_lest.ogx",
                  "contentType": "video/mp2t",
                  "convertedContentType": null,
                  "size": "6046908",
                  "originalKey": "uploads/ofr579y6bqnt152wowxrfkyy/yet_rightfully_lest.ogx",
                  "convertedKey": null,
                  "thumbnailKey": null,
                  "createdAt": "2024-10-12T17:43:05.360Z",
                  "createdBy": "0uwim8y2tppz7th9tol75wjz",
                  "modifiedAt": "2024-10-12T17:43:05.360Z",
                  "modifiedBy": "0uwim8y2tppz7th9tol75wjz",
                  "organizationId": "8dwkbmpkeuemouu8t58r8fuj"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/attachments/{id}/link": {
      "get": {
        "security": [],
        "operationId": "redirectToAttachment",
        "tags": [
          "attachments"
        ],
        "summary": "Redirect to attachment",
        "description": "Redirects to the file's public or presigned URL, depending on storage visibility.",
        "x-guard": [
          "isPublicAccess"
        ],
        "x-rate-limiter": [
          "tokenLimiter"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/memberships": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "membershipInvite",
        "tags": [
          "memberships"
        ],
        "summary": "Create memberships",
        "description": "Creates one or more *memberships*, inviting users (existing or new) to a context entity such as an organization.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "organization"
              ]
            },
            "required": true,
            "name": "entityType",
            "in": "query"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "emails": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 4,
                      "maxLength": 100,
                      "format": "email"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "member",
                      "admin"
                    ]
                  }
                },
                "required": [
                  "emails",
                  "role"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Number of sent invitations",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessWithRejectedItems"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "invitesSentCount": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "invitesSentCount"
                      ]
                    }
                  ],
                  "example": {
                    "success": true,
                    "rejectedItems": []
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      },
      "delete": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "deleteMemberships",
        "tags": [
          "memberships"
        ],
        "summary": "Delete memberships",
        "description": "Deletes one or more *memberships* by ID. This removes the membership but does not delete the associated user(s).",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "organization"
              ]
            },
            "required": true,
            "name": "entityType",
            "in": "query"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 50
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessWithRejectedItems"
                },
                "example": {
                  "success": true,
                  "rejectedItems": []
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/memberships/{id}": {
      "put": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "updateMembership",
        "tags": [
          "memberships"
        ],
        "summary": "Update membership",
        "description": "Updates the *membership* metadata, such as role, `muted`, or `archived` status.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "role": {
                    "type": "string",
                    "enum": [
                      "member",
                      "admin"
                    ]
                  },
                  "muted": {
                    "type": "boolean"
                  },
                  "archived": {
                    "type": "boolean"
                  },
                  "order": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Membership updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Membership"
                },
                "example": {
                  "id": "575b0vreys30k2k4z795uufw",
                  "contextType": "organization",
                  "userId": "xg7596t8jiy8d0v8irrljzhy",
                  "organizationId": "7ul53b62aw5h7k6x44nbu2r5",
                  "role": "member",
                  "order": 49,
                  "muted": false,
                  "archived": false,
                  "createdAt": "2024-10-28T14:52:59.502Z",
                  "createdBy": "xg7596t8jiy8d0v8irrljzhy",
                  "modifiedAt": "2024-10-28T14:52:59.502Z",
                  "modifiedBy": null,
                  "uniqueKey": "xg7596t8jiy8d0v8irrljzhy-7ul53b62aw5h7k6x44nbu2r5"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/memberships/{id}/{acceptOrReject}": {
      "post": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "handleMembershipInvitation",
        "tags": [
          "memberships"
        ],
        "summary": "Respond to membership invitation",
        "description": "Accepting activates the associated membership. Rejecting simply removes the invitation token.",
        "x-guard": [
          "isAuthenticated"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "accept",
                "reject"
              ]
            },
            "required": true,
            "name": "acceptOrReject",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation was accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextEntityBase"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/memberships/members": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getMembers",
        "tags": [
          "memberships"
        ],
        "summary": "Get list of members",
        "description": "Retrieves members (users) of a context entity by ID or slug, including their associated *membership* data.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "name",
                "email",
                "role",
                "createdAt",
                "lastSeenAt"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "organization"
              ]
            },
            "required": true,
            "name": "entityType",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "member",
                "admin"
              ]
            },
            "required": false,
            "name": "role",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Members",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "createdAt": {
                            "type": "string"
                          },
                          "id": {
                            "type": "string"
                          },
                          "entityType": {
                            "type": "string",
                            "enum": [
                              "user"
                            ]
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "slug": {
                            "type": "string"
                          },
                          "thumbnailUrl": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "bannerUrl": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "email": {
                            "type": "string",
                            "format": "email"
                          },
                          "mfaRequired": {
                            "type": "boolean"
                          },
                          "firstName": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "lastName": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "language": {
                            "type": "string",
                            "enum": [
                              "en",
                              "nl"
                            ]
                          },
                          "modifiedAt": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "lastStartedAt": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "lastSignInAt": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "modifiedBy": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "lastSeenAt": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "membership": {
                            "$ref": "#/components/schemas/MembershipBase"
                          }
                        },
                        "required": [
                          "createdAt",
                          "id",
                          "entityType",
                          "name",
                          "description",
                          "slug",
                          "thumbnailUrl",
                          "bannerUrl",
                          "email",
                          "mfaRequired",
                          "firstName",
                          "lastName",
                          "language",
                          "modifiedAt",
                          "lastStartedAt",
                          "lastSignInAt",
                          "modifiedBy",
                          "lastSeenAt",
                          "membership"
                        ]
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    },
    "/{orgIdOrSlug}/memberships/pending": {
      "get": {
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "operationId": "getPendingMemberships",
        "tags": [
          "memberships"
        ],
        "summary": "Get list of pending memberships",
        "description": "Returns pending memberships for a context entity, identified by ID or slug. This does not include pending invitations for non-existing users.",
        "x-guard": [
          "isAuthenticated",
          "hasOrgAccess"
        ],
        "x-rate-limiter": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "orgIdOrSlug",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "q",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "createdAt"
              ],
              "default": "createdAt"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "required": false,
            "name": "order",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Entity ID or slug. ID is always preferred."
            },
            "required": true,
            "description": "Entity ID or slug. ID is always preferred.",
            "name": "idOrSlug",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "organization"
              ]
            },
            "required": true,
            "name": "entityType",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending memberships",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string",
                            "format": "email"
                          },
                          "thumbnailUrl": {
                            "type": [
                              "string",
                              "null"
                            ]
                          },
                          "role": {
                            "type": [
                              "string",
                              "null"
                            ],
                            "enum": [
                              "member",
                              "admin",
                              null
                            ]
                          },
                          "createdAt": {
                            "type": "string"
                          },
                          "createdBy": {
                            "type": [
                              "string",
                              "null"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "email",
                          "thumbnailUrl",
                          "role",
                          "createdAt",
                          "createdBy"
                        ]
                      }
                    },
                    "total": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequestsError"
          }
        }
      }
    }
  },
  "webhooks": {}
}