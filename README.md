<div align="center">

  <img src="./.github/banner-dark.png#gh-dark-mode-only" />
  <img src="./.github/banner.png#gh-light-mode-only" />

<br />

<!--
 *                            _ _
 *    ‚ñë‚ñí‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñí‚ñë     ___ ___| | | __ _
 *    ‚ñë‚ñí‚ñì‚ñà   ‚ñà‚ñì‚ñí‚ñë    / __/ _ \ | |/ _` |
 *    ‚ñë‚ñí‚ñì‚ñà   ‚ñà‚ñì‚ñí‚ñë   | (_|  __/ | | (_| |
 *    ‚ñë‚ñí‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñí‚ñë    \___\___|_|_|\__,_|                            
 *
 -->

[cellajs.com](https://cellajs.com) &centerdot; ‚ùóprerelease version &centerdot; MIT license

</div>

#### Contents
- [Installation](#installation)
- [Architecture](/info/ARCHITECTURE.md)
- [Roadmap](/info/ROADMAP.md)
- [Deployment](/info/DEPLOYMENT.md)

## Installation

### Step 1

#### Clone project & open directory

```bash
git clone git@github.com:cellajs/cella.git && cd cella
```

#### Env variables

Create a .env in `env` folder with `.env.example`. Minimum requirement is `DATABASE_URL` variable.

### Step 2

There are three ways to run Cella:

<details>
  <summary>A: Directly on local machine (Recommended for active devs)</summary>

#### Prerequisites
- **Node:** Check your Node version with `node -v`. Install Node 20.x using [Volta](https://docs.volta.sh/guide/).
- **pnpm:** Check your pnpm version with `pnpm -v`. Install pnpm 8.x using [Volta](https://docs.volta.sh/advanced/pnpm).
- **Postgres:** Install PostgreSQL 16.x on your machine, for example using [Postgres.app](https://postgresapp.com/) if you are on a Mac.

#### Install dependencies
```bash
pnpm install
```

#### Populate database
If starting from scratch, you will need to run a database generate + migrate.

```bash
pnpm run generate
pnpm run migrate
```
Check it out at <http://localhost:3000>:

```bash
pnpm run dev
```
</details>

<details>
  <summary>B: From inside a VS devcontainer (Not yet stable)</summary>

#### Prerequisites
- VSCode and [Dev containers](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)
- [Orbstack](https://orbstack.dev/) or [Docker](https://docs.docker.com/get-docker/)

#### Run devcontainer
- Open VSCode and click one of these buttons to run the container:
  <img width="1177" alt="Screenshot" src="https://github.com/cellajs/cella/tree/main/info/devcontainer.png">
- Alternatively, open the project in VSCode and use `‚åò+‚áß+p` to run the `Remote-Containers: Reopen in Container` command.

Start command in container terminal:

```bash
pnpm run dev
```

#### Problems?
- **Rebuilding the docker container**: Just open Orbstack and delete the container and volume that has `cella` in the name.
- **CORS issues**: Make sure to open `http://localhost:3000/` and not `http://127.0.0.1:3000/`
</details>

<details>
  <summary>C: As basic docker container (Recommended for quick start)</summary>

#### Prerequisites
- [Orbstack](https://orbstack.dev/) or [Docker](https://docs.docker.com/get-docker/)

#### Run docker
```bash
pnpm run docker
```
</details>

### Step 3

The users [seed](/backend/seed/index.ts) is required to add an ADMIN user. There is also an optional seed to add more data [faker.js](https://github.com/faker-js/faker). In a container? Access the (backend) container to run the seeds.

```bash
pnpm run seed:users
pnpm run seed:organizations
```

Use [Drizzle Studio](https://orm.drizzle.team/drizzle-studio/overview) to manage your local db on <https://local.drizzle.studio>

```bash
pnpm run studio
```

### API documentation
Cella has autogenerated [API docs](https://cellajs.com/api/v1/docs). View on local at <https://localhost:4000/docs>


### More info
- Cella uses [Biome](https://biomejs.dev/). Please [install it](https://marketplace.visualstudio.com/items?itemName=biomejs.biome) for a correct code style. For manual lint fixing run `pnpm run check:fix` for type errors `pnpm run check:types`
- EADDRINUSE errors? Try `sudo lsof -i :1080 -i :3000 -i :4000` and then `kill -9 *PID*` with a space-separated list of `PID`
- pnpm cache issues? Try `pnpm store prune`
- turbo cache issues? Try adding `--force` to the command
- docker cache issues? Try `docker builder prune --force`

<br />
<br />

üíôüíõ Built on top of amazing OS projects! Mainly [drizzle-orm](https://github.com/drizzle-team/drizzle-orm), [honojs](https://github.com/honojs/hono), [tanstack-router](https://github.com/tanstack/router) & [shadcn](https://github.com/shadcn-ui/ui).
