<div align="center">

  <img src="./.github/banner-dark.png#gh-dark-mode-only" />
  <img src="./.github/banner.png#gh-light-mode-only" />

<br />

<!--
 *                            _ _
 *    ‚ñë‚ñí‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñí‚ñë     ___ ___| | | __ _
 *    ‚ñë‚ñí‚ñì‚ñà   ‚ñà‚ñì‚ñí‚ñë    / __/ _ \ | |/ _` |
 *    ‚ñë‚ñí‚ñì‚ñà   ‚ñà‚ñì‚ñí‚ñë   | (_|  __/ | | (_| |
 *    ‚ñë‚ñí‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñí‚ñë    \___\___|_|_|\__,_|                            
 *
 -->


<p>
	<h1><b>Cella</b></h1>
<p>
    <b>Single stack TypeScript template to build local-first SaaS.</b>
    <br />
    <br />
    <a href="https://cellajs.com">Website</a>
    ¬∑
    prerelease version
    ¬∑
    MIT license
  </p>
  <br />
  <br />
</p>

</div>

#### Prerelease

> ‚ùó Please be aware this is a prerelease. It does not meet production requirements yet and large breaking changes still occur regularly. Want to contribute? Let's connect! ‚úâÔ∏è <info@cellajs.com>


#### Contents
- [Installation](#installation)
- [Architecture](/info/ARCHITECTURE.md)
- [Roadmap](/info/ROADMAP.md)
- [Deployment](/info/DEPLOYMENT.md)

## Installation

#### Prerequisites
- **Node:** Check node with `node -v`. Install Node 20.x or 22.x with (recommended) [Volta](https://docs.volta.sh/guide/).
- **Docker:** Install [Orbstack](https://orbstack.dev/) or [Docker](https://docs.docker.com/get-docker/)

### Step 1

```bash
git clone git@github.com:cellajs/cella.git && cd cella
```

Create a `.env` in `/env` folder with `.env.example`. Minimum is `DATABASE_URL` and `ELECTRIC_SYNC_URL` (recommended to use existing defaults). Then install:

```bash
pnpm install
```

Make sure docker runs in the background with a postgres db in it, or skip this and use supabase instead. 

```bash
pnpm run docker
```

Or, use [Supabase](https://supabase.io/) as a database. Add the `SUPABASE_DATABASE_URL` to `.env` file. Then run:

```bash
pnpm run docker:supabase
```

### Step 2
Cella adopted a local-first strategy, whereby page-related resources are handled normally by an API, whereas content-related resources are fully handled local-first using [ElectricSQL](https://github.com/electric-sql/electric).
Therefore, `generate` and `migrate` commands will execute both for normal schemas and for electric schemas in `/backend`.

```bash
pnpm run generate
pnpm run migrate 
```

Generate local-first sync layer in `/frontend` with [ElectricSQL](https://github.com/electric-sql/electric)

```bash
pnpm run electrify
```

Check it out at [localhost:3000](http://localhost:3000)

```bash
pnpm run dev
```

### Step 3

The user [seed](/backend/seed/index.ts) is required to add an ADMIN user. Check `/backend/seed` to add more data with [faker.js](https://github.com/faker-js/faker).

```bash
pnpm run seed:user
pnpm run seed:organizations
```

Use [Drizzle Studio](https://orm.drizzle.team/drizzle-studio/overview) to manage your local db on [local.drizzle.studio](http:local.drizzle.studio)

```bash
pnpm run studio
```

### API documentation
Cella uses [Scalar](https://scalar.com) for autogenerated [OpenAPI docs](https://cellajs.com/api/v1/docs). They are update automatically on local at [localhost:4000/docs](http://localhost:4000/docs)


### More info
- Cella uses [Biome](https://biomejs.dev/). Please [install it](https://marketplace.visualstudio.com/items?itemName=biomejs.biome) for a correct code style. For manual lint fixing run `pnpm run check:fix` for type errors `pnpm run check:types`
- EADDRINUSE errors? Try `sudo lsof -i :1080 -i :3000 -i :4000` and then `kill -9 *PID*` with a space-separated list of `PID`
- pnpm cache issues? Try `pnpm store prune`
- turbo cache issues? Try adding `--force` to the command
- docker cache issues? Try `docker builder prune --force`

<br />
<br />

üíôüíõ Big thank you too [drizzle-orm](https://github.com/drizzle-team/drizzle-orm), [hono](https://github.com/honojs/hono), [tanstack-router](https://github.com/tanstack/router), [electric-sql](https://github.com/electric-sql/electric) & [shadcn](https://github.com/shadcn-ui/ui).
